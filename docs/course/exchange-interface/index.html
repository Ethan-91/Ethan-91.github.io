<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Exchange Interface (EI) Description# The connection method of the EI interface, the exchange service hosts the user&rsquo;s TK, is responsible for tracking the user&rsquo;s UTXO, and provides online and offline signature methods. Compared with the SSI interface, which requires the peer to manage UTXO itself, EI is simpler, safer, and more practical.
Please_note_the_users_and_read_this_article_carefully.#  Seed-&gt; SK-&gt; TK-&gt; PK has a one-to-one correlation, a PK can correlate to a very large number of PKr through random numbers.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="Exchange Interface(EI) Description" />
<meta property="og:description" content="Exchange Interface (EI) Description# The connection method of the EI interface, the exchange service hosts the user&rsquo;s TK, is responsible for tracking the user&rsquo;s UTXO, and provides online and offline signature methods. Compared with the SSI interface, which requires the peer to manage UTXO itself, EI is simpler, safer, and more practical.
Please_note_the_users_and_read_this_article_carefully.#  Seed-&gt; SK-&gt; TK-&gt; PK has a one-to-one correlation, a PK can correlate to a very large number of PKr through random numbers." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://Ethan-91.github.io/docs/course/exchange-interface/" />

<title>Exchange Interface(EI) Description | ZORRO</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="alternate" hreflang="zh" href="https://Ethan-91.github.io/zh/docs/course/exchange-interface/" title="WALLET对接(EI接口说明)">

<link rel="stylesheet" href="/book.min.b3215d9d1d18d9051e7fbe8f256ff80e30f41d29073b86348e230d297b771002.css" integrity="sha256-syFdnR0Y2QUef76PJW/4DjD0HSkHO4Y0jiMNKXt3EAI=">
<script defer src="/en.search.min.88a517a499b999098a8e8b3e0562c5d902d3c5b21c6a48ea82992489b1c4fdf9.js" integrity="sha256-iKUXpJm5mQmKjos&#43;BWLF2QLTxbIcakjqgpkkibHE/fk="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><span>ZORRO</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  
  
  

  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
    <span>Getting started</span>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/introduction/build-from-sourcecoude/" class="">Build from the source code</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/introduction/operate-in-console/" class="">Console operation</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
    <span>Tutorial</span>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/course/service-interface/" class="">Service Interface(SI) Description</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/course/exchange-interface/" class="active">Exchange Interface(EI) Description</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/course/flight-interface/" class="">Flight Interface(FI) Description</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/course/principle-of-anonymous-token/" class="">Anonymous tokens issuance principle</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/course/how-to-staking-using-zro/" class="">How to start ZORRO Staking on zro</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
  </ul>
  















</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Exchange Interface(EI) Description</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#please_note_the_users_and_read_this_article_carefully">Please_note_the_users_and_read_this_article_carefully.</a></li>
    <li><a href="#account">Account</a>
      <ul>
        <li><a href="#seed">Seed</a></li>
        <li><a href="#skprivate_key">sk(Private_Key)</a></li>
        <li><a href="#tktracking_key">TK(Tracking_Key)</a></li>
        <li><a href="#pkpublic_key">PK(Public_Key)</a></li>
        <li><a href="#pkrreceipt_code">PKr(Receipt_Code)</a></li>
      </ul>
    </li>
    <li><a href="#offline_signature">Offline_Signature</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#import_account">Import_Account</a></li>
    <li><a href="#rpc_version_of_the_offline_interface">Rpc_version_of_the_offline_interface</a></li>
    <li><a href="#wallet_interface">Wallet_interface</a>
      <ul>
        <li></li>
        <li><a href="#getblockbynumber">GetBlockByNumber</a></li>
        <li><a href="#getblocksinfo">GetBlocksInfo</a></li>
        <li><a href="#getpkr">GetPkr</a></li>
        <li><a href="#getpkbypkr">GetPkByPkr</a></li>
        <li><a href="#getbalances">GetBalances</a></li>
        <li><a href="#getrecords">GetRecords</a></li>
        <li><a href="#gentx">GenTx</a></li>
        <li><a href="#genmergetx">GenMergeTx</a></li>
        <li><a href="#gettx">GetTx</a></li>
        <li><a href="#gentxwithsign">GenTxWithSign</a></li>
        <li><a href="#committx">CommitTx</a></li>
        <li><a href="#getpksynced">GetPkSynced</a></li>
        <li><a href="#merge">Merge</a></li>
        <li><a href="#validaddress">ValidAddress</a></li>
        <li><a href="#getlockedbalances">GetLockedBalances</a></li>
        <li><a href="#getmaxavailable">GetMaxAvailable</a></li>
        <li><a href="#clearusedflag">ClearUsedFlag</a></li>
        <li><a href="#clearusedflagforroot">ClearUsedFlagForRoot</a></li>
      </ul>
    </li>
    <li><a href="#suggested_listing_solution">Suggested_Listing_Solution</a>
      <ul>
        <li><a href="#account_management">Account_management</a></li>
        <li><a href="#recharge_monitoring">Recharge_monitoring</a></li>
        <li><a href="#withdrawal">Withdrawal</a></li>
        <li><a href="#automatic_utxo_merger">Automatic_UTXO_Merger</a></li>
      </ul>
    </li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="exchange-interface-ei-description">
  <strong>Exchange Interface (EI) Description</strong>
  <a class="anchor" href="#exchange-interface-ei-description">#</a>
</h1>
<hr>
<p>The connection method of the EI interface, the exchange service hosts the user&rsquo;s TK, is responsible for tracking the user&rsquo;s UTXO, and provides online and offline signature methods.
Compared with the SSI interface, which requires the peer to manage UTXO itself, EI is simpler, safer, and more practical.</p>
<h2 id="please_note_the_users_and_read_this_article_carefully">
  Please_note_the_users_and_read_this_article_carefully.
  <a class="anchor" href="#please_note_the_users_and_read_this_article_carefully">#</a>
</h2>
<ol>
<li>
<p><strong>Seed-&gt; SK-&gt; TK-&gt; PK has a one-to-one correlation, a PK can correlate to a very large number of PKr through random numbers.</strong></p>
</li>
<li>
<p><strong>Each user is associated with a different PKr through a random number, and then associated with a unique PK. There is no need to generate a seed for each user.</strong></p>
</li>
<li>
<p><strong>Please frequently merge the UTXO of the account, otherwise too much UTXO during the transfer will cause the signature time to be too long, which will seriously affect the user experience.</strong></p>
</li>
</ol>
<h2 id="account">
  Account
  <a class="anchor" href="#account">#</a>
</h2>
<p>Account by <code>Seed</code>, <code>SK</code>, <code>TK</code>, <code>PK</code>, <code>PKr</code> is composed of four keys, and the generation relationship is as follows:</p>
<pre><code>seed(seed) -&gt; sk(Private Key) -&gt; TK(Tracking Key) -&gt; PK(Public Key) -&gt; PKr(Receipt Code)
</code></pre><h3 id="seed">
  Seed
  <a class="anchor" href="#seed">#</a>
</h3>
<ul>
<li><code>seed</code> is a 32-byte BYTE array, which can be generated by HASH algorithm or mnemonic. Having <code>seed</code> can release all subsequent keys, so it must be kept absolutely secure.</li>
</ul>
<h3 id="skprivate_key">
  sk(Private_Key)
  <a class="anchor" href="#skprivate_key">#</a>
</h3>
<ul>
<li>
<p>The Private key <code>SK</code> has a total of 64 BYTE, consisting of two large integers of 32 BYTE, and correlates one-to-one with <code>seed</code></p>
<ul>
<li><code>sk=(zsk,vsk) \;\;zsk \in Fr, \; vsk \in Fr </code></li>
</ul>
</li>
<li>
<p>The private key is used to sign the transaction and also needs to be kept absolutely secure.</p>
</li>
<li>
<p>Can be generated as <code>seed</code></p>
</li>
<li>
<p><strong>Go Language</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">  <span style="color:#a6e22e">cpt</span>.<span style="color:#a6e22e">ZeroInit_OnlyInOuts</span>()    <span style="color:#75715e">// Initialize the encryption library
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">seed</span> <span style="color:#a6e22e">keys</span>.<span style="color:#a6e22e">Uint256</span>
  <span style="color:#a6e22e">seed</span>=<span style="color:#a6e22e">c_type</span>.<span style="color:#a6e22e">RandUint256</span>()
  <span style="color:#a6e22e">sk</span><span style="color:#f92672">:=</span><span style="color:#a6e22e">superzk</span>.<span style="color:#a6e22e">Seed2Sk</span>(
    <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">seed</span>,                    <span style="color:#75715e">// Seed 32 Byte Random Number
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">1</span>                         <span style="color:#75715e">//SuperZK Protocol version 1: SuperZK1.0, 2: SuperZK2.0   
</span><span style="color:#75715e"></span>  )
</code></pre></div><ul>
<li><strong>JS language</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">newKeysBySeed</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;js-zorro-client&#39;</span>).<span style="color:#a6e22e">newKeysBySeed</span>
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">seed</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Buffer</span>.<span style="color:#a6e22e">alloc</span>(
      <span style="color:#ae81ff">32</span>,
      <span style="color:#e6db74">&#39;fd1b401d2bbfa09fba577b398b09b5ea075bd8f37773095c6e62271a4b080977&#39;</span>,
      <span style="color:#e6db74">&#39;hex&#39;</span>
)
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">keys</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">newKeysBySeed</span>(
  <span style="color:#a6e22e">seed</span>,                 <span style="color:#75715e">//seed Can be used directly as a string (hex|base58)
</span><span style="color:#75715e"></span>  <span style="color:#ae81ff">1</span>                     <span style="color:#75715e">//SuperZK Protocol version 1: SuperZK1.0, 2: SuperZK2.0
</span><span style="color:#75715e"></span>)
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">sk</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">keys</span>.<span style="color:#a6e22e">sk</span>.<span style="color:#a6e22e">toString</span>(<span style="color:#e6db74">&#39;hex&#39;</span>)
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">tk_hex</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">keys</span>.<span style="color:#a6e22e">tk</span>.<span style="color:#a6e22e">toString</span>(<span style="color:#e6db74">&#39;hex&#39;</span>)
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">tk_base58</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">keys</span>.<span style="color:#a6e22e">tk</span>.<span style="color:#a6e22e">ToBase58</span>()
</code></pre></div><h3 id="tktracking_key">
  TK(Tracking_Key)
  <a class="anchor" href="#tktracking_key">#</a>
</h3>
<ul>
<li>
<p><code>TK</code> is a 64-length BYTE array consisting of a 32 BYTE <code>ECC_{fp}</code> points and a large integer. The  <code>ZPK</code> is the first 32 BYTE of <code>PK</code>, <code>vsk</code> is the last 32 BYTE of <code>sk</code>. One-to-one correlation between <code>TK</code> and <code>sk</code>.</p>
<ul>
<li><code>TK=(ZPK,vsk) \; ZPK \in ECC_{fp},\; vsk \in Fr</code></li>
</ul>
</li>
<li>
<p><code>TK</code> can only be used to view the details of UTXO belonging to the account and can be provided to trusted third parties for independent auditing.</p>
</li>
<li>
<p><code>TK</code> is generated by <code>sk</code></p>
</li>
<li>
<p><strong>Go language</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">  <span style="color:#a6e22e">tk</span><span style="color:#f92672">:=</span><span style="color:#a6e22e">superzk</span>.<span style="color:#a6e22e">Sk2Tk</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">sk</span>)   <span style="color:#75715e">//SuperZK1.0/2.0 Can be used
</span></code></pre></div><ul>
<li><strong>JS language</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">newKeysBySk</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;js-zorro-client&#39;</span>).<span style="color:#a6e22e">newKeysBySk</span>
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">sk</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Buffer</span>.<span style="color:#a6e22e">alloc</span>(
         <span style="color:#ae81ff">64</span>,
         <span style="color:#e6db74">&#39;4e7f432c24d2......e1513eadfef9d1cd604&#39;</span>,
         <span style="color:#e6db74">&#39;hex&#39;</span>
  )
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">keys</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">newKeysBySk</span>(<span style="color:#a6e22e">sk</span>)   <span style="color:#75715e">//sk Can be used directly as a string (hex|base58)
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">tk_hex</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">keys</span>.<span style="color:#a6e22e">tk</span>.<span style="color:#a6e22e">toString</span>(<span style="color:#e6db74">&#39;hex&#39;</span>)
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">tk_base58</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">keys</span>.<span style="color:#a6e22e">tk</span>.<span style="color:#a6e22e">ToBase58</span>()
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">pk_hex</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">keys</span>.<span style="color:#a6e22e">pk</span>.<span style="color:#a6e22e">toString</span>(<span style="color:#e6db74">&#39;hex&#39;</span>)
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">pk_base58</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">keys</span>.<span style="color:#a6e22e">pk</span>.<span style="color:#a6e22e">ToBase58</span>()
</code></pre></div><h3 id="pkpublic_key">
  PK(Public_Key)
  <a class="anchor" href="#pkpublic_key">#</a>
</h3>
<ul>
<li>
<p>Public key <code>PK</code> is also 64 BYTE, which consists of two 32 BYTE <code>ECC_{fp}</code>, points, correlates one-to-one with <code>TK</code></p>
<ul>
<li><code>PK=(ZPK,VPK)  \; ZPK \in ECC_{fp}, \; VPK \in ECC_{fp}</code></li>
</ul>
</li>
<li>
<p><code>PK</code> is used to generate <code>PKr</code> (Receipt Code). You can provide <code>PK</code> to a third party. <code>PK</code> generates yours <code>PKr</code> (Receipt Code), will then be used to transfer you money and use <code>TK</code> to track the account. However, because of the relationship between safety and performance, it is not recommended to use it directly.</p>
</li>
<li>
<p><code>PK</code> is generated by <code>TK</code></p>
</li>
<li>
<p><strong>Go language</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"> <span style="color:#a6e22e">pk</span><span style="color:#f92672">:=</span><span style="color:#a6e22e">superzk</span>.<span style="color:#a6e22e">Tk2Pk</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">tk</span>)        <span style="color:#75715e">// tk: SuperZK1.0/2.0 Protocol tracking keys
</span></code></pre></div><ul>
<li><strong>JS language</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">newKeysByTk</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;js-zorro-client&#39;</span>).<span style="color:#a6e22e">newKeysByPK</span>
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">tk</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Buffer</span>.<span style="color:#a6e22e">alloc</span>(
         <span style="color:#ae81ff">64</span>,
         <span style="color:#e6db74">&#39;6a367411b800be76a9d......1ee1513eadfef9d1cd604&#39;</span>,
        <span style="color:#e6db74">&#39;hex&#39;</span>
  )
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">keys</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">newKeysByTk</span>(<span style="color:#a6e22e">tk</span>)      <span style="color:#75715e">//tk Can be used directly as a string (hex|base58)
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">pk_hex</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">keys</span>.<span style="color:#a6e22e">pk</span>.<span style="color:#a6e22e">toString</span>(<span style="color:#e6db74">&#39;hex&#39;</span>)
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">pk_base58</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">keys</span>.<span style="color:#a6e22e">pk</span>.<span style="color:#a6e22e">ToBase58</span>()
</code></pre></div><h3 id="pkrreceipt_code">
  PKr(Receipt_Code)
  <a class="anchor" href="#pkrreceipt_code">#</a>
</h3>
<ul>
<li>
<p>Payment code <code>PKr</code> is a binary data of 96 BYTE, composed of three 32 BYTE <code>ECC_{fp}</code>. You can convert <code>PK</code> and a random number to <code>PKr</code> through <code>keys.Addr2PKr</code></p>
<ul>
<li><code>PKr=(ZPKr,VPKr,BASEr) \; ZPKr \in ECC_{fp}, \; VPKr \in ECC_{fp}, \; BASEr \in ECC_{fp}</code></li>
</ul>
</li>
<li>
<p><code>PKr</code> is the target of UTXO. Each <code>PK</code> corresponds to a very large number of <code>PKr</code>. The UTXO pointing to this <code>PKr</code> can be decrypted by <code>TK</code> and signed by <code>sk</code> when in use.</p>
</li>
<li>
<p><code>PKr</code> is generated by adding a 32 BYTE random number to <code>PK</code>.</p>
</li>
<li>
<p><strong>Go language</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">  <span style="color:#a6e22e">rnd</span><span style="color:#f92672">:=</span><span style="color:#a6e22e">c_superzk</span>.<span style="color:#a6e22e">RandomFr</span>()  
  <span style="color:#a6e22e">pkr</span><span style="color:#f92672">:=</span><span style="color:#a6e22e">superzk</span>.<span style="color:#a6e22e">PK2PKr</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">pk</span>,<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">rnd</span>)    <span style="color:#75715e">//SuperZK2.0/1.0 Can be used
</span></code></pre></div><ul>
<li><strong>JS language</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">newKeysByPK</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;js-zorro-client&#39;</span>).<span style="color:#a6e22e">newKeysByPK</span>  <span style="color:#75715e">//SuperZK1.0/2.0 shared
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">Czero</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;js-zorro-client&#39;</span>).<span style="color:#a6e22e">Czero</span>
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">pk</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Buffer</span>.<span style="color:#a6e22e">alloc</span>(
         <span style="color:#ae81ff">64</span>,
         <span style="color:#e6db74">&#39;6a367411b800be......df5fb72aba4019&#39;</span>,
         <span style="color:#e6db74">&#39;hex&#39;</span>
  )
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">rnd</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Czero</span>.<span style="color:#a6e22e">RandomU32</span>()
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">keys</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">newKeysByPK</span>(<span style="color:#a6e22e">pk</span>)    <span style="color:#75715e">//pk Can be used directly as a string (hex|base58)
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">pkr</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">keys</span>.<span style="color:#a6e22e">GenPKr</span>(<span style="color:#a6e22e">rnd</span>)
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">pkr_hex</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">pkr</span>.<span style="color:#a6e22e">toString</span>(<span style="color:#e6db74">&#34;hex&#34;</span>)
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">pkr_base58</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">pkr</span>.<span style="color:#a6e22e">ToBase58</span>()
</code></pre></div><h4 id="interchange-between-base58-and-hex-encoding-in-zro-console">
  Interchange between Base58 and Hex encoding in zro console
  <a class="anchor" href="#interchange-between-base58-and-hex-encoding-in-zro-console">#</a>
</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">web3</span>.<span style="color:#a6e22e">addressToHex</span>(<span style="color:#a6e22e">zorro</span>.<span style="color:#a6e22e">accounts</span>[<span style="color:#ae81ff">0</span>])
<span style="color:#e6db74">&#34;0x0dbd9c096......849304201ea6&#34;</span>

<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">web3</span>.<span style="color:#a6e22e">hexToBase58</span>(<span style="color:#e6db74">&#34;0x0dbd9c09......9304201ea6&#34;</span>)
<span style="color:#e6db74">&#34;GwA94QDTyQ86cE5jcuYCyrQ9Bu9FRcXfq4dxQhryTDzhkahUjYSHcjZ5yFF9bvaZPRMUwR8k5uW4bT3DvPf77a5&#34;</span>
</code></pre></div><h2 id="offline_signature">
  Offline_Signature
  <a class="anchor" href="#offline_signature">#</a>
</h2>
<p>After configuring the transaction in a full node program (zro), you need to use zorro&rsquo;s client for offline signing.</p>
<p>Offline signing program is also divided into Go version and JS version.</p>
<h4 id="go-language">
  Go Language
  <a class="anchor" href="#go-language">#</a>
</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">import</span> <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#a6e22e">github</span>.<span style="color:#a6e22e">com</span><span style="color:#f92672">/</span><span style="color:#a6e22e">ZorroChain</span><span style="color:#f92672">/</span><span style="color:#a6e22e">zorro</span><span style="color:#f92672">/</span><span style="color:#a6e22e">zero</span><span style="color:#f92672">/</span><span style="color:#a6e22e">txtool</span><span style="color:#f92672">/</span><span style="color:#a6e22e">flight</span><span style="color:#960050;background-color:#1e0010">&#39;</span>
<span style="color:#f92672">import</span> <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#a6e22e">github</span>.<span style="color:#a6e22e">com</span><span style="color:#f92672">/</span><span style="color:#a6e22e">ZorroChain</span><span style="color:#f92672">/</span><span style="color:#a6e22e">zorro</span><span style="color:#f92672">/</span><span style="color:#a6e22e">zero</span><span style="color:#f92672">/</span><span style="color:#a6e22e">txtool</span><span style="color:#960050;background-color:#1e0010">&#39;</span>
<span style="color:#f92672">import</span> <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#a6e22e">github</span>.<span style="color:#a6e22e">com</span><span style="color:#f92672">/</span><span style="color:#a6e22e">ZorroChain</span><span style="color:#f92672">/</span><span style="color:#a6e22e">zorro</span><span style="color:#f92672">/</span><span style="color:#a6e22e">czk</span><span style="color:#f92672">/</span><span style="color:#a6e22e">cpt</span><span style="color:#960050;background-color:#1e0010">&#39;</span>
<span style="color:#a6e22e">param_str</span><span style="color:#f92672">:=</span><span style="color:#960050;background-color:#1e0010">&#39;</span>{<span style="color:#e6db74">&#34;Gas&#34;</span>:<span style="color:#ae81ff">25000</span>,<span style="color:#e6db74">&#34;GasPrice&#34;</span>:<span style="color:#ae81ff">1000000000</span>,<span style="color:#e6db74">&#34;From&#34;</span>:{<span style="color:#e6db74">&#34;SKr&#34;</span>:<span style="color:#960050;background-color:#1e0010">&#34;</span><span style="color:#ae81ff">0x0</span> <span style="color:#f92672">...</span>. }<span style="color:#960050;background-color:#1e0010">&#39;</span>  <span style="color:#75715e">// Configured from full nodes sk_str:=&#39;0xfd1b401d2bbfa09fba577b398b09b5ea075bd8f37773095c6e62271a4b080977&#39;
</span><span style="color:#75715e">//------ initialization -----
</span><span style="color:#75715e"></span><span style="color:#a6e22e">cpt</span>.<span style="color:#a6e22e">ZeroInit_OnlyInOuts</span>() <span style="color:#75715e">// Can only be executed once globally
</span><span style="color:#75715e">//------txParam---
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">param</span> <span style="color:#a6e22e">txtool</span>.<span style="color:#a6e22e">GTxParam</span>
<span style="color:#a6e22e">json</span>.<span style="color:#a6e22e">Unmarshal</span>([]byte(<span style="color:#a6e22e">param_str</span>),<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">param</span>)
<span style="color:#75715e">//------Private key ----
</span><span style="color:#75715e"></span><span style="color:#a6e22e">bs</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">hexutil</span>.<span style="color:#a6e22e">Decode</span>(<span style="color:#a6e22e">sk_str</span>)
<span style="color:#a6e22e">sk</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">keys</span>.<span style="color:#a6e22e">Uint512</span>{}
copy(<span style="color:#a6e22e">sk</span>[:], <span style="color:#a6e22e">bs</span>)
<span style="color:#75715e">//------ Signature ----
</span><span style="color:#75715e"></span><span style="color:#a6e22e">gtx</span>, <span style="color:#a6e22e">_</span><span style="color:#f92672">:=</span><span style="color:#a6e22e">flight</span>.<span style="color:#a6e22e">SignTx</span>(<span style="color:#a6e22e">sk</span>,<span style="color:#a6e22e">param</span>)
<span style="color:#75715e">//------ Convert to JSON -----
</span><span style="color:#75715e"></span><span style="color:#a6e22e">tx</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">json</span>.<span style="color:#a6e22e">Marshal</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">gtx</span>)
</code></pre></div><h4 id="js-language">
  Js Language
  <a class="anchor" href="#js-language">#</a>
</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">account</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;js-zorro-client&#39;</span>).<span style="color:#a6e22e">Account</span>
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">tx</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;js-zorro-client&#39;</span>).<span style="color:#a6e22e">Tx</span>
<span style="color:#75715e">//------
</span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">seedStr</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;fd1b401d2bbfa09fba577b398b09b5ea075bd8f37773095c6e62271a4b080977&#39;</span>
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">txParamStr</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;{&#34;Gas&#34;:25000,&#34;GasPrice&#34;:1000000000,&#34;Fro .... }&#39;</span>       <span style="color:#75715e">// Configured from full nodes
</span><span style="color:#75715e">//------
</span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">seed</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Buffer</span>.<span style="color:#a6e22e">alloc</span>(<span style="color:#ae81ff">32</span>, <span style="color:#a6e22e">seedStr</span>, <span style="color:#e6db74">&#39;hex&#39;</span>)
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">keys</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">account</span>.<span style="color:#a6e22e">NewKeys</span>(<span style="color:#a6e22e">seed</span>)
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">skStr</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">keys</span>.<span style="color:#a6e22e">sk</span>.<span style="color:#a6e22e">toString</span>(<span style="color:#e6db74">&#39;hex&#39;</span>)
<span style="color:#75715e">//------
</span><span style="color:#75715e"></span><span style="color:#a6e22e">tx</span>.<span style="color:#a6e22e">SignTx</span>(
  <span style="color:#a6e22e">txParamStr</span>,
  <span style="color:#a6e22e">skStr</span>,                        <span style="color:#75715e">// String hex|base58
</span><span style="color:#75715e"></span>  (<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">tx</span>) =&gt; {
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">err</span>) {
      <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#a6e22e">err</span>)
    } <span style="color:#66d9ef">else</span> {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">tx</span>)
    }
  }
)
</code></pre></div><h4 id="note">
  Note
  <a class="anchor" href="#note">#</a>
</h4>
<ul>
<li>The signature program determines the number of parallel calculations based on the performance of the current machine, and the transaction generation time is proportional to the number of UTXOs referenced.
<ul>
<li>If you spend a lot of UTXO, the generation time will become very long.</li>
</ul>
</li>
<li>Solution
<ul>
<li>For online signature applications, merge the incoming UTXO.
<ul>
<li>zro&rsquo;s exchange service provides automatic merge function, add <code>—autoMerge</code> to zro to automatically merge UTXO.</li>
</ul>
</li>
<li>You can extend the timeout of interface calls.
<ul>
<li><code>--rpcwritetimeout [SECOND]</code> Add this parameter when starting zro to set the timeout for zro writeback, in seconds.</li>
</ul>
</li>
<li>For offline signing applications
<ul>
<li>Run multiple signatures in parallel</li>
<li>Use genMergeTx to generate offline signature transaction parameters, and then send them after offline signature.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="import_account">
  Import_Account
  <a class="anchor" href="#import_account">#</a>
</h2>
<p>zro has two ways of importing accounts, namely <code>seed</code> and <code>TK</code>. After importing <code>TK</code>, zro can only be used to track the account balance and recharge records or generate receipt codes. The transactions generated must be submitted to the chain after being signed offline. Importing <code>seed</code> can directly use zro to sign transactions.</p>
<ul>
<li>
<p>Import <code>seed</code></p>
<ul>
<li>Import with mnemonic words <code>seed</code> in web3:</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">personal</span>.<span style="color:#a6e22e">importMnemonic</span>(<span style="color:#e6db74">&#34;uncle frost ex.....ion before&#34;</span>,<span style="color:#e6db74">&#34;123456&#34;</span>)  <span style="color:#75715e">// Mnemonic, password
</span><span style="color:#75715e"></span><span style="color:#e6db74">&#34;GwA94QDTyQ86cE5jcu......aZPRMUwR8k5uW4bT3DvPf77a5&#34;</span>    <span style="color:#75715e">// Public key PK
</span></code></pre></div><ul>
<li>The mnemonic corresponding to the derived seed is</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">personal</span>.<span style="color:#a6e22e">exportMnemonic</span>(<span style="color:#a6e22e">zorro</span>.<span style="color:#a6e22e">accounts</span>[<span style="color:#ae81ff">0</span>],<span style="color:#e6db74">&#34;123456&#34;</span>)  <span style="color:#75715e">// Public key PK, password
</span><span style="color:#75715e"></span><span style="color:#e6db74">&#34;uncle frost expose ...... salmon champion before&#34;</span>
</code></pre></div><ul>
<li>Directly import hex-encoded <code>seed</code> (32 bytes random number)</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">personal</span>.<span style="color:#a6e22e">importRawKey</span>(
  <span style="color:#e6db74">&#34;ec8bad429641f......0b1ab03d1f&#34;</span>, <span style="color:#75715e">//Seed
</span><span style="color:#75715e"></span>  <span style="color:#e6db74">&#34;123456&#34;</span>,                        <span style="color:#75715e">//password
</span><span style="color:#75715e"></span>  <span style="color:#ae81ff">1</span>,                               <span style="color:#75715e">// protocol version 1: SuperZK1.0，2: SuperZK2.0
</span><span style="color:#75715e"></span>  <span style="color:#ae81ff">1800000</span>                          <span style="color:#75715e">// Account balance analysis from 1.8 million blocks
</span><span style="color:#75715e"></span>)
<span style="color:#e6db74">&#34;GwA94QDTyQ86cE5jc......8k5uW4bT3DvPf77a5&#34;</span>     <span style="color:#75715e">// Public key PK
</span></code></pre></div><ul>
<li>Export hex-encoded <code>seed</code>, need to have this account imported already.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span><span style="color:#a6e22e">personal</span>.<span style="color:#a6e22e">exportRawKey</span>(<span style="color:#e6db74">&#34;GwA94QDTyQ86cE5j....DvPf77a5&#34;</span>,<span style="color:#e6db74">&#34;123456&#34;</span>)  <span style="color:#75715e">// Public key PK, password
</span></code></pre></div><ul>
<li>Then use accounts to view the public key of the imported account</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">zorro</span>.<span style="color:#a6e22e">accounts</span>
[<span style="color:#e6db74">&#34;GwA94QDTyQ86cE5jcuYCyrQ9Bu9FRcXfq4dxQhryTDzhkahUjYSHcjZ5yFF9bvaZPRMUwR8k5uW4bT3DvPf77a5&#34;</span>]
</code></pre></div><ul>
<li>Import <code>TK</code>, can only view and track transactions and balances, cannot send transactions.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">personal</span>.<span style="color:#a6e22e">importTk</span>(
  <span style="color:#e6db74">&#34;GwA94QDTyQ86cE5......AwUB22sEmQQ1AguYXn&#34;</span>, <span style="color:#75715e">//TK
</span><span style="color:#75715e"></span>  <span style="color:#ae81ff">1800000</span>                                    <span style="color:#75715e">// Account analysis from 1.8 million blocks
</span><span style="color:#75715e"></span>)
<span style="color:#e6db74">&#34;GwA94QDTyQ86cE5jcuYCyr......bvaZPRMUwR8k5uW4bT3DvPf77a5&#34;</span>   <span style="color:#75715e">//Public key PK
</span></code></pre></div><ul>
<li>View of account <code>TK</code></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">zorro</span>.<span style="color:#a6e22e">getTk</span>(<span style="color:#a6e22e">zorro</span>.<span style="color:#a6e22e">accounts</span>[<span style="color:#ae81ff">0</span>])                        <span style="color:#75715e">// Public key PK
</span><span style="color:#75715e"></span><span style="color:#e6db74">&#34;GwA94QDTyQ86cE5jcuYCy.......AwUB22sEmQQ1AguYXn&#34;</span>      <span style="color:#75715e">//TK
</span></code></pre></div><ul>
<li>After importing the account, the exchange service will automatically analyze the block information. If it is a newly imported account, the service will take some time to analyze the latest block. You can see if the analysis is complete by looking at zro&rsquo;s logs.</li>
<li>You need to open the <code>—exchange</code> mark</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">INFO <span style="color:#f92672">[</span>06-13|15:44:00.016<span style="color:#f92672">]</span> Exchange indexed                         blockNumber<span style="color:#f92672">=</span><span style="color:#ae81ff">1031753</span>
INFO <span style="color:#f92672">[</span>06-13|15:44:50.007<span style="color:#f92672">]</span> Exchange indexed                         blockNumber<span style="color:#f92672">=</span><span style="color:#ae81ff">1031754</span>
INFO <span style="color:#f92672">[</span>06-13|15:45:00.007<span style="color:#f92672">]</span> Exchange indexed                         blockNumber<span style="color:#f92672">=</span><span style="color:#ae81ff">1031755</span>
INFO <span style="color:#f92672">[</span>06-13|15:45:10.007<span style="color:#f92672">]</span> Exchange indexed                         blockNumber<span style="color:#f92672">=</span><span style="color:#ae81ff">1031756</span>
</code></pre></div><p>Regardless of whether <code>seed</code> or <code>TK</code> is imported, <code>zro</code> will generate a keystore for it, where <code>seed</code> is stored in the form of secret text, <code>TK</code> is stored in clear text.</p>
</li>
<li>
<p><strong>After importing the account, the exchange analysis will start from block 1. In order to avoid too long exchange analysis time, users can:</strong></p>
<ul>
<li>By modifying the number of automatically skipped blocks in the keystore file</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#e6db74">&#34;address&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;24DidZ7...KWTQtU8&#34;</span>,
  <span style="color:#e6db74">&#34;tk&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;24Did...BaG84r&#34;</span>,
  <span style="color:#e6db74">&#34;crypto&#34;</span><span style="color:#f92672">:</span>{
        <span style="color:#e6db74">&#34;cipher&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;aes-128-ctr&#34;</span>,
        <span style="color:#e6db74">&#34;ciphertext&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;4e4b3247...adbff2&#34;</span>,
        <span style="color:#e6db74">&#34;cipherparams&#34;</span><span style="color:#f92672">:</span>{<span style="color:#e6db74">&#34;iv&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;1d13d245...3f9db2&#34;</span>},
        <span style="color:#e6db74">&#34;kdf&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;scrypt&#34;</span>,
        <span style="color:#e6db74">&#34;kdfparams&#34;</span><span style="color:#f92672">:</span>{<span style="color:#e6db74">&#34;dklen&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">32</span>,<span style="color:#e6db74">&#34;n&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">262144</span>,<span style="color:#e6db74">&#34;p&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">1</span>,<span style="color:#e6db74">&#34;r&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">8</span>,<span style="color:#e6db74">&#34;salt&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;e17991a97...b1b7bd&#34;</span>},
        <span style="color:#e6db74">&#34;mac&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;b66f0c...2dd7d06&#34;</span>
  },
  <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;f939...28c&#34;</span>,
  <span style="color:#e6db74">&#34;version&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">1</span>,
  <span style="color:#e6db74">&#34;at&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">1050000</span>                  <span style="color:#75715e">// Increase at automatically, skip the previous 1 ~ 1050000 blocks automatically
</span><span style="color:#75715e"></span>}
</code></pre></div><ul>
<li>Or provide the at parameter when importing the account.</li>
</ul>
</li>
</ul>
<h2 id="rpc_version_of_the_offline_interface">
  Rpc_version_of_the_offline_interface
  <a class="anchor" href="#rpc_version_of_the_offline_interface">#</a>
</h2>
<p>Currently, the offline API interface provides two languages, go and javascript. Other languages ​​can use these functions by starting a zro that is not connected to the outside world through rpc.</p>
<ul>
<li>
<p><strong>seed generates sk</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">seed2Sk</span>(
  <span style="color:#e6db74">&#34;0xec8bad429......0b1ab03d1f&#34;</span>,
  <span style="color:#ae81ff">1</span>                                  <span style="color:#75715e">//SuperZK Protocol version 1：1.0 2：2.0
</span><span style="color:#75715e"></span>)    <span style="color:#75715e">//seed: hex encoding
</span><span style="color:#75715e"></span><span style="color:#e6db74">&#34;0x8fe1c73ac......0d1bc4305&#34;</span>                       <span style="color:#75715e">//sk: hex encoding
</span></code></pre></div></li>
<li>
<p><strong>sk generates TK</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">sk2Tk</span>(<span style="color:#e6db74">&#34;0x8fe1c7......40d1bc4305&#34;</span>)    <span style="color:#75715e">//sk: hex encoding
</span><span style="color:#75715e"></span><span style="color:#e6db74">&#34;GwA94QDTy......QQ1AguYXn&#34;</span>                    <span style="color:#75715e">//TK: base58 encoding
</span></code></pre></div></li>
<li>
<p><strong>TK generates PK</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">tk2Pk</span>(
  <span style="color:#e6db74">&#34;GwA94QDTyQ86c......1AguYXn&#34;</span>,   <span style="color:#75715e">//TK: hex or base58 encoding
</span><span style="color:#75715e"></span>)
<span style="color:#e6db74">&#34;GwA94QDTyQ8......uW4bT3DvPf77a5&#34;</span>              <span style="color:#75715e">//PK: base58 encoding
</span></code></pre></div></li>
<li>
<p><strong>PK generates PKr</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span>  <span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">pk2Pkr</span>(
  <span style="color:#e6db74">&#34;GwA94QDTyQ8......uW4bT3DvPf77a5&#34;</span>,            <span style="color:#75715e">//PK
</span><span style="color:#75715e"></span>  <span style="color:#e6db74">&#34;0x000000000......0000110&#34;</span>                    <span style="color:#75715e">//32 byte The random number is automatically generated if it is empty
</span><span style="color:#75715e"></span>)  <span style="color:#75715e">// PK,RNG
</span><span style="color:#75715e"></span><span style="color:#e6db74">&#34;22mZ61am......aevRpWMD89&#34;</span>           <span style="color:#75715e">//PKr: base58 encoding
</span></code></pre></div></li>
<li>
<p><strong>Offline signature</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">sk</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;0xfd1b401d2bbf......71a4b080977&#39;</span>                            <span style="color:#75715e">// Private key SK: hex encoding
</span><span style="color:#75715e"></span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">txParamObj</span> <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;Gas&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">25000</span>,<span style="color:#e6db74">&#34;GasPrice&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">1000000000</span>,.... }       <span style="color:#75715e">// Configured by a full node (not a string)
</span><span style="color:#75715e"></span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">tx</span><span style="color:#f92672">=</span><span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">signTxWithSk</span>(<span style="color:#a6e22e">txParamObj</span>,<span style="color:#a6e22e">sk</span>)
</code></pre></div></li>
</ul>
<h2 id="wallet_interface">
  Wallet_interface
  <a class="anchor" href="#wallet_interface">#</a>
</h2>
<p>ZORRO&rsquo;s full node program (zro) provides a set of services specifically for exchange listing. Exchange makes third-party listing easier. The listing party can obtain the account-related balance and record information on the chain when only the <code>TK</code> of the account is imported. The interface supports both <code>jsonrpc</code> and <code>console</code>.</p>
<h4 id="start-the-exchange-service-of-the-full-node-zro">
  Start the exchange service of the full node (zro)
  <a class="anchor" href="#start-the-exchange-service-of-the-full-node-zro">#</a>
</h4>
<ul>
<li>
<p>Add the startup zro <code>—exchange</code> and <code>--rpcapi exchange,zorro</code> two parameters to open zro of exchange services.</p>
<ul>
<li><code>–exchange</code> Start <code>exchange</code> service</li>
<li><code>--rpcapi zorro,exchange</code> Open the jsonrpc interface of <code>exchange</code> and <code>zorro</code></li>
<li>Other <code>rpc</code> parameters are consistent with Ethereum</li>
</ul>
</li>
<li>
<p>In order to ensure security when the computing power fluctuates greatly, the number of confirmed blocks can be set.</p>
<ul>
<li><code>--confirmedBlock 32</code> Set 32 ​​blocks to confirm the transaction. The default is 12 blocks.</li>
</ul>
</li>
<li>
<p>The rpc of ZORRO has a limit on the request size, and the default is 512K.</p>
<ul>
<li><code>--rpcRequestContentLength 1048576</code> Can change the limit to 1M</li>
</ul>
</li>
<li>
<p>If you cannot handle the bigint type when the jsonrpc return value is serialized, you can make jsonrpc return a numeric value as a string.</p>
<ul>
<li><code>--exchangeValueStr</code> Will make zro&rsquo;s jsonrpc interface return the value as a string.</li>
</ul>
</li>
<li>
<p>In order to store data on the hard disk as little as possible, zro currently saves snapshots every 10,000 blocks or 1 hour, so when zro is closed, synchronization will start from the nearest integer multiple of 10,000.</p>
<ul>
<li><code>--gcmode archive</code> Will make zro save snapshot data for each block, and will not roll back the block when restarting. But this method will consume more hard disk storage.</li>
</ul>
</li>
<li>
<p>When zro has a large number of UTXO signatures, it will take more time to sign, so you can adjust the timeout for zro to write back to the client.</p>
<ul>
<li><code>--rpcwritetimeout [SECOND]</code> Add this parameter when starting zro to set the timeout for zro writeback, in seconds.</li>
</ul>
</li>
<li>
<p>Example startup parameters</p>
<ul>
<li>The listing party can modify the above configuration according to requirements</li>
</ul>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">./zro --exchange --datadir ~/zroData --port <span style="color:#ae81ff">53717</span> --rpc --rpcport <span style="color:#ae81ff">8545</span> --rpcapi exchange,zorro,net --rpcaddr 127.0.0.1  --rpccorsdomain <span style="color:#e6db74">&#34;*&#34;</span> --keystore ~/keystore --confirmedBlock <span style="color:#ae81ff">32</span> --rpcwritetimeout <span style="color:#ae81ff">1800</span> --exchangeValueStr
</code></pre></div><h4 id="interface-introduction">
  Interface Introduction
  <a class="anchor" href="#interface-introduction">#</a>
</h4>
<ul>
<li>
<p><strong>Interface <code>exchange</code> provided by ZORRO</strong></p>
<ul>
<li><a href="#GetBLockByNumber"><code>GetBlockByNumber(num)-&gt;block</code></a></li>
<li>Get basic information of a block</li>
<li>You can also use <code>zorro.GetBlockByNumer</code> to get more detailed information, the usage is compatible with Ethereum</li>
<li><a href="#GetBlocksInfo"><code>GetBlocksInfo(start,end)-&gt;blocks</code></a>
<ul>
<li>Get <code>start~end</code> details between blocks</li>
</ul>
</li>
<li><a href="#GetPKr"><code>GetPkr(pk,rnd)-&gt;pkr</code></a>
<ul>
<li>Generate payment code <code>pkr</code> based on public key <code>pk</code> and random number <code>rnd</code></li>
</ul>
</li>
<li><a href="#GetPkByPkr"><code>GetPkByPkr(pkr)-&gt;pk</code></a>
<ul>
<li>Reverse check <code>pk</code> by payment code <code>pkr</code></li>
<li>The corresponding account <code>Pk</code> must be in <code>zro</code></li>
</ul>
</li>
<li><a href="#GetBalances"><code>GetBalances(pk)-&gt;balances</code></a>
<ul>
<li>Get the total <code>balance</code> by public key <code>pk</code></li>
</ul>
</li>
<li><a href="#GetRecords"><code>GetRecords(begin,end,[pk])-&gt;[]Utxo</code></a>
<ul>
<li>Get the <code>UTXO</code> that the account <code>pk</code> has recharged between the block number <code>begin</code> and <code>end</code>.</li>
</ul>
</li>
<li><a href="#GenTx"><code>GenTx(preTxParam)-&gt;txParam</code></a>
<ul>
<li>Get the <code>txParam</code> that can be used for signature through <code>preTxParam</code>.</li>
</ul>
</li>
<li><a href="#GenMergeTx"><code>GenMergeTx(mergeParam)-&gt;txParam</code></a>
<ul>
<li>Generate merged transaction parameters <code>txParam</code> based on the parameter <code>mergeParam</code>. <code>txParam</code> requires offline signature.</li>
</ul>
</li>
<li><a href="#GetTx"><code>GetTx(txhash)-&gt;tx</code></a>
<ul>
<li>Get details of transaction hash</li>
<li>Currently only provide accounting records</li>
</ul>
</li>
<li><a href="#GenTxWithSign"><code>GenTxWithSign(preTxParam)-&gt;tx</code></a>
<ul>
<li>Generate the signed tx directly through <code>preTxParam</code></li>
<li>Account needs to be imported <code>seed</code></li>
</ul>
</li>
<li><a href="#CommitTx"><code>CommitTx(tx)-&gt;()</code></a>
<ul>
<li>Submit the signed tx to the transaction pool and broadcast it to the entire network</li>
</ul>
</li>
<li><a href="#GetPkSynced"><code>GetPkSynced(pk)-&gt;pkState</code></a>
<ul>
<li>Get the analysis of current <code>exchange</code> account</li>
</ul>
</li>
<li><a href="#Merge"><code>Merge(pk,currency)-&gt;txhash</code></a>
<ul>
<li>Online signature</li>
<li>Automatically merge <code>UTXO</code> of <code>currency</code></li>
<li>The target value is less than 10 <code>UTXO</code></li>
</ul>
</li>
<li><a href="#ValidAddress"><code>ValidAddress(pk|pkr)-&gt;bool</code></a>
<ul>
<li>Check if PK or PKr is legal</li>
</ul>
</li>
<li><a href="#GetLockedBalances"><code>GetLockedBalances(pk)-&gt;lockedState</code></a>
<ul>
<li>Check the amount of locks that may result from generating transactions</li>
</ul>
</li>
<li><a href="#GetMaxAvailable"><code>GetMaxAvailable(pk,currency)-&gt;value</code></a>
<ul>
<li>Get the maximum amount that the <code>currency</code> can  send</li>
</ul>
</li>
<li><a href="#ClearUsedFlag"><code>ClearUsedFlag(pk)-&gt;()</code></a>
<ul>
<li>Clear <code>UTXO</code> flag locked under <code>PK</code> due to sending transaction</li>
</ul>
</li>
<li><a href="#ClearUsedFlagForRoot"><code>ClearUsedFlagForRoot([root,...])-&gt;()</code></a>
<ul>
<li>Clear the lock token of UTXO represented by <code>root</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="getblockbynumber">
  GetBlockByNumber
  <a class="anchor" href="#getblockbynumber">#</a>
</h3>
<ul>
<li>
<p>Get the current block information according to the block number</p>
</li>
<li>
<p><strong>jsonrpc</strong></p>
<ul>
<li>request</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
    <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
    <span style="color:#e6db74">&#34;jsonrpc&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;2.0&#34;</span>,
    <span style="color:#e6db74">&#34;method&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;exchange_getBlockByNumber&#34;</span>,
    <span style="color:#e6db74">&#34;params&#34;</span><span style="color:#f92672">:</span> [
    <span style="color:#ae81ff">109</span>                  <span style="color:#75715e">// Block number, empty means to get the latest block。
</span><span style="color:#75715e"></span>      ]
}
</code></pre></div></li>
</ul>
<pre><code>  
  - response
  ```javascript
  {
      &quot;id&quot;: 0,
      &quot;result&quot;: {
      &quot;BlockHash&quot;:&quot;0x61de8473709....3172c2225e55&quot;， // Block hash
      &quot;BlockNumber&quot;: 109,                           // Block number
      &quot;ParentHash&quot;: &quot;0xaf5f6bf0814203a8b49fc3398489e029dd4e9e5da45be241d3f85fc234f341aa&quot;
      &quot;timestamp&quot;: 1561398077                  // Timestamp
      &quot;TxHashes&quot;: [                            // Transaction hash list
        &quot;0xc31c834efe568d56e7b4c60e7aefe2b223e8567244f242c7870ec5cb47cc1000&quot;, 
        &quot;0x9123159d7016086ed4e1ec253f575cd38f04cc4dea31ce922d1387c985e336c8&quot;
      ]
    }
        &quot;error&quot;: null
  }
</code></pre><ul>
<li><strong>console</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span>  <span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">getBlockByNumber</span>(<span style="color:#ae81ff">109</span>)
{
    <span style="color:#e6db74">&#34;hash&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;0x61de8473709567be5278c2e607915e6f9001f45f51dc94f8792a3172c2225e55&#34;</span><span style="color:#960050;background-color:#1e0010">，</span>
    <span style="color:#e6db74">&#34;number&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">109</span>, 
    <span style="color:#e6db74">&#34;timestamp&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1561398077</span>,
    <span style="color:#e6db74">&#34;TxHashes&#34;</span><span style="color:#f92672">:</span> [
      <span style="color:#e6db74">&#34;0xc31c834efe568d56e7b4c60e7aefe2b223e8567244f242c7870ec5cb47cc1000&#34;</span>, 
      <span style="color:#e6db74">&#34;0x9123159d7016086ed4e1ec253f575cd38f04cc4dea31ce922d1387c985e336c8&#34;</span>
    ]
}
</code></pre></div><h3 id="getblocksinfo">
  GetBlocksInfo
  <a class="anchor" href="#getblocksinfo">#</a>
</h3>
<ul>
<li>
<p>Get UTXO usage information for a range of blocks</p>
</li>
<li>
<p><strong>jsonrpc</strong></p>
<ul>
<li>request</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
    <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
    <span style="color:#e6db74">&#34;jsonrpc&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;2.0&#34;</span>,
    <span style="color:#e6db74">&#34;method&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;exchange_getBlocksInfo&#34;</span>,
    <span style="color:#e6db74">&#34;params&#34;</span><span style="color:#f92672">:</span> [
     <span style="color:#ae81ff">108</span>,                  <span style="color:#75715e">// Starting block number
</span><span style="color:#75715e"></span>     <span style="color:#ae81ff">109</span>                   <span style="color:#75715e">// End block number
</span><span style="color:#75715e"></span>  ]
}
</code></pre></div><ul>
<li>response</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
    <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
    <span style="color:#e6db74">&#34;result&#34;</span><span style="color:#f92672">:</span> {
    [
      {
        <span style="color:#a6e22e">BlockHash</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x42fee36......d82bd53&#34;</span>,                  <span style="color:#75715e">// Block Hash
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">Ins</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;0xd85......e0d597&#34;</span>],                      <span style="color:#75715e">// UTXO root spent by this block
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">BlockNumber</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">108</span>,                                        <span style="color:#75715e">// Block height
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">Outs</span><span style="color:#f92672">:</span> [{
            <span style="color:#a6e22e">Currency</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;ZORRO&#34;</span>,
            <span style="color:#a6e22e">Nil</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xe1d29......d15d89&#34;</span>,
            <span style="color:#a6e22e">Num</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">108</span>,
            <span style="color:#a6e22e">Pkr</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x842e......950d&#34;</span>,
            <span style="color:#a6e22e">Root</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x192717......646d42a&#34;</span>,
            <span style="color:#a6e22e">TxHash</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xf8f2269......66d181&#34;</span>,
            <span style="color:#a6e22e">Value</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">70000000000000000000</span>
          },
          ......
        ]
      }
    ]
  }
    <span style="color:#e6db74">&#34;error&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>
}
</code></pre></div></li>
<li>
<p><strong>console</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span>  <span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">getBlocksInfo</span>(<span style="color:#ae81ff">108</span>,<span style="color:#ae81ff">109</span>)
  {
    [
      {
        <span style="color:#a6e22e">BlockHash</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x42fee36......d82bd53&#34;</span>,
        <span style="color:#a6e22e">Ins</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;0xd85......e0d597&#34;</span>],
        <span style="color:#a6e22e">BlockNum</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">108</span>,
        <span style="color:#a6e22e">Outs</span><span style="color:#f92672">:</span> [{
            <span style="color:#a6e22e">Currency</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;ZORRO&#34;</span>,
            <span style="color:#a6e22e">Nil</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xe1d29......d15d89&#34;</span>,
            <span style="color:#a6e22e">Num</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">108</span>,
            <span style="color:#a6e22e">Pkr</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x842e......950d&#34;</span>,
            <span style="color:#a6e22e">Root</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x192717......646d42a&#34;</span>,
            <span style="color:#a6e22e">TxHash</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xf8f2269......66d181&#34;</span>,
            <span style="color:#a6e22e">Value</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">70000000000000000000</span>
          },
          ......
        ]
      }
    ]
  }
</code></pre></div><h3 id="getpkr">
  GetPkr
  <a class="anchor" href="#getpkr">#</a>
</h3>
<ul>
<li>
<p>Create a PKr corresponding to PK with a random number</p>
</li>
<li>
<p><strong>jsonrpc</strong></p>
<ul>
<li>request</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
  <span style="color:#e6db74">&#34;jsonrpc&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;2.0&#34;</span>,
  <span style="color:#e6db74">&#34;method&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;exchange_getPkr&#34;</span>,
  <span style="color:#e6db74">&#34;params&#34;</span><span style="color:#f92672">:</span> [
    <span style="color:#e6db74">&#34;0x0dbd9c096......32a20849304201ea6&#34;</span>,    <span style="color:#75715e">// PK hex encoding
</span><span style="color:#75715e"></span>    <span style="color:#e6db74">&#34;0x000000000......00000000000000101&#34;</span>     <span style="color:#75715e">//32 BYTE random number, need&gt; 0x100
</span><span style="color:#75715e"></span>  ]
}
</code></pre></div><ul>
<li>response</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
  <span style="color:#e6db74">&#34;result&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x8423cdaf21db11......d1c76e728630a882a14&#34;</span>,    <span style="color:#75715e">//PKr
</span><span style="color:#75715e"></span>  <span style="color:#e6db74">&#34;error&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>
}
</code></pre></div></li>
<li>
<p><strong>console</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span>  <span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">getPkr</span>(<span style="color:#a6e22e">zorro</span>.<span style="color:#a6e22e">accounts</span>[<span style="color:#ae81ff">0</span>],<span style="color:#e6db74">&#34;0x000000000......00000000000000100&#34;</span>)
<span style="color:#e6db74">&#34;0x4546ffe8932.......88efeead5d7a84&#34;</span>
</code></pre></div><h3 id="getpkbypkr">
  GetPkByPkr
  <a class="anchor" href="#getpkbypkr">#</a>
</h3>
<ul>
<li>
<p>Get PKr&rsquo;s corresponding PK in zro</p>
</li>
<li>
<p><strong>jsonrpc</strong></p>
<ul>
<li>request</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
  <span style="color:#e6db74">&#34;jsonrpc&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;2.0&#34;</span>,
  <span style="color:#e6db74">&#34;method&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;exchange_getPkByPkr&#34;</span>,
  <span style="color:#e6db74">&#34;params&#34;</span><span style="color:#f92672">:</span> [
    <span style="color:#e6db74">&#34;0xa01b191......ad09bf320&#34;</span>    <span style="color:#75715e">// Hex code for receipt code Pkr
</span><span style="color:#75715e"></span>  ]
}
</code></pre></div><ul>
<li>response</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
  <span style="color:#e6db74">&#34;result&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xc3863f5......bce8168a87&#34;</span>,    <span style="color:#75715e">// Public key PK
</span><span style="color:#75715e"></span>  <span style="color:#e6db74">&#34;error&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>
}
</code></pre></div></li>
<li>
<p><strong>console</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span>  <span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">getPkByPkr</span>(<span style="color:#e6db74">&#34;0xa01b191......ad09bf320&#34;</span>)
<span style="color:#e6db74">&#34;0xc3863f5......bce8168a87&#34;</span>
</code></pre></div><h3 id="getbalances">
  GetBalances
  <a class="anchor" href="#getbalances">#</a>
</h3>
<ul>
<li>
<p>Get the current total balance of the account represented by PK</p>
</li>
<li>
<p><strong>jsonrpc</strong></p>
<ul>
<li>request</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
  <span style="color:#e6db74">&#34;jsonrpc&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;2.0&#34;</span>,
  <span style="color:#e6db74">&#34;method&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;exchange_getBalances&#34;</span>,
  <span style="color:#e6db74">&#34;params&#34;</span><span style="color:#f92672">:</span> [
    <span style="color:#e6db74">&#34;0x0dbd9c096ca52fa44570......58332a20849304201ea6&#34;</span>       <span style="color:#75715e">// Public key PK
</span><span style="color:#75715e"></span>  ]
}
</code></pre></div><ul>
<li>response</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
    <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
    <span style="color:#e6db74">&#34;result&#34;</span><span style="color:#f92672">:</span> {
      <span style="color:#e6db74">&#34;tkn&#34;</span> <span style="color:#f92672">:</span> {
      <span style="color:#e6db74">&#34;ZORRO&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">4000000000000000000</span>  <span style="color:#75715e">// Currency name: balance
</span><span style="color:#75715e"></span>      },
  <span style="color:#e6db74">&#34;tkt&#34;</span> <span style="color:#f92672">:</span> {}
  },
  <span style="color:#e6db74">&#34;error&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>
}
</code></pre></div></li>
<li>
<p><strong>console</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">getBalances</span>(<span style="color:#a6e22e">web3</span>.<span style="color:#a6e22e">addressToHex</span>(<span style="color:#a6e22e">zorro</span>.<span style="color:#a6e22e">accounts</span>[<span style="color:#ae81ff">0</span>]))
{
  <span style="color:#a6e22e">ZORRO</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">169900000000000000000</span>
}
</code></pre></div><h3 id="getrecords">
  GetRecords
  <a class="anchor" href="#getrecords">#</a>
</h3>
<ul>
<li>
<p>Get recharge history</p>
</li>
<li>
<p><strong>jsonrpc</strong></p>
<ul>
<li>request</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
    <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
    <span style="color:#e6db74">&#34;jsonrpc&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;2.0&#34;</span>,
    <span style="color:#e6db74">&#34;method&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;exchange_getRecords&#34;</span>,
    <span style="color:#e6db74">&#34;params&#34;</span><span style="color:#f92672">:</span> [
      <span style="color:#ae81ff">1</span>,                                    <span style="color:#75715e">// Starting block number
</span><span style="color:#75715e"></span>      <span style="color:#ae81ff">1000</span><span style="color:#960050;background-color:#1e0010">，</span>                                <span style="color:#75715e">// End block number
</span><span style="color:#75715e"></span>    <span style="color:#e6db74">&#34;0x0dbd9c096......849304201ea6&#34;</span>,      <span style="color:#75715e">// Payment Code (PKr) | Account Public Key (PK) | Leave blank
</span><span style="color:#75715e"></span>    ]
}
</code></pre></div><ul>
<li>response</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
  <span style="color:#e6db74">&#34;result&#34;</span><span style="color:#f92672">:</span> [                                                 <span style="color:#75715e">// Top-up UTXO list
</span><span style="color:#75715e"></span>    {
      <span style="color:#e6db74">&#34;Pkr&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x67dc2f42a063477a7ef......1fbbfd8707b0cd449994&#34;</span>,
      <span style="color:#e6db74">&#34;Root&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x13ca7a02c8......8e85b08775a3706b0&#34;</span>,              <span style="color:#75715e">// UTXO unique identification
</span><span style="color:#75715e"></span>      <span style="color:#e6db74">&#34;TxHash&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x000000000000000......00000000000000000000&#34;</span>,    <span style="color:#75715e">// The hash of Tx where UTXO is located
</span><span style="color:#75715e"></span>      <span style="color:#e6db74">&#34;Nil&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x902953f4eaec70e......b09beb8fff798a0d59ec23&#34;</span>,     <span style="color:#75715e">// UTXO obsolete code
</span><span style="color:#75715e"></span>      <span style="color:#e6db74">&#34;Num&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,                                                   <span style="color:#75715e">// UTXO block height
</span><span style="color:#75715e"></span>  <span style="color:#e6db74">&#34;Currency&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;ZORRO&#34;</span>,                                         <span style="color:#75715e">// Currency name
</span><span style="color:#75715e"></span>      <span style="color:#e6db74">&#34;Value&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;1000000000000000000&#34;</span>                                <span style="color:#75715e">// Number of coins
</span><span style="color:#75715e"></span>   }, 
   {
      <span style="color:#e6db74">&#34;Pkr&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x291560a9ad4db22df......7bef504d7c7544dbddabcce6e79f0b&#34;</span>,
      <span style="color:#e6db74">&#34;Root&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xa9623b4c88f53e......09522c831bf508834be8a7&#34;</span>,
      <span style="color:#e6db74">&#34;TxHash&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x0dd3a111270......7da11af453498&#34;</span>,
      <span style="color:#e6db74">&#34;Nil&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xa6acfbc53cf68c433......0a1c0b974ad55977048069f&#34;</span>,
      <span style="color:#e6db74">&#34;Num&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>,
      <span style="color:#e6db74">&#34;Currency&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;ZORRO&#34;</span>,                                         <span style="color:#75715e">// Currency name
</span><span style="color:#75715e"></span>      <span style="color:#e6db74">&#34;Value&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;1000000000000000000&#34;</span>                                <span style="color:#75715e">// Number of coins
</span><span style="color:#75715e"></span>   },
  ......
  ],
  <span style="color:#e6db74">&#34;error&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>
}
</code></pre></div></li>
<li>
<p><strong>console</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">getRecords</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">3</span>,<span style="color:#a6e22e">zorro</span>.<span style="color:#a6e22e">accounts</span>[<span style="color:#ae81ff">0</span>])
[
  {
    <span style="color:#a6e22e">Currency</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;ZORRO&#34;</span>,
    <span style="color:#a6e22e">Nil</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x5b3d....b0b328&#34;</span>,
    <span style="color:#a6e22e">Num</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
    <span style="color:#a6e22e">Pkr</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x5e3f88....1ee14&#34;</span>,
    <span style="color:#a6e22e">Root</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xd79e00....250bc96&#34;</span>,
    <span style="color:#a6e22e">TxHash</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x000000000......00000000000&#34;</span>,
    <span style="color:#a6e22e">Value</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;17600000000000000000&#34;</span>
  },
  ......
]
</code></pre></div><h3 id="gentx">
  GenTx
  <a class="anchor" href="#gentx">#</a>
</h3>
<ul>
<li>Offline signature version of transaction generation</li>
<li>ZORRO has a limit on the number of inputs and outputs of a transaction
<ul>
<li>No more than 10 in plain text and no more than 500 in secret text</li>
<li>No more than 2500 input in plain text, no limitation in secret text input
<ul>
<li>Can get the maximum amount that can be sent through the API <code>GetMaxAvailable</code></li>
</ul>
</li>
<li>Every time GenTx is called, UTXO is rotated and the UTXO is written down.
<ul>
<li>Can query the amount of money that has been locked throught the api <code>GetLockedBalances</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p><strong>jsonrpc</strong></p>
<ul>
<li>request</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
    <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
    <span style="color:#e6db74">&#34;jsonrpc&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;2.0&#34;</span>,
    <span style="color:#e6db74">&#34;method&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;exchange_genTx&#34;</span>,
    <span style="color:#e6db74">&#34;params&#34;</span><span style="color:#f92672">:</span> [{
            <span style="color:#e6db74">&#34;From&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x0dbd9c0......9304201ea6&#34;</span>,                <span style="color:#75715e">// Account&#39;s PK
</span><span style="color:#75715e"></span>    <span style="color:#e6db74">&#34;RefundTo&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x8423cdaf......630a882a14&#34;</span>,          <span style="color:#75715e">// Optional, change receipt code (PKr), if it is empty, it will be generated automatically。
</span><span style="color:#75715e"></span>      <span style="color:#e6db74">&#34;Gas&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">25000</span>,                                       <span style="color:#75715e">// Maximum gas consumption, minimum 25000
</span><span style="color:#75715e"></span>      <span style="color:#e6db74">&#34;GasPrice&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1000000000</span>,                             <span style="color:#75715e">// GasPrice, default 1Gta
</span><span style="color:#75715e"></span>    <span style="color:#e6db74">&#34;Cmds&#34;</span><span style="color:#f92672">:</span> {                                           <span style="color:#75715e">// Optional, execute command parameters (&gt;=v1.0.0-rc6)
</span><span style="color:#75715e"></span>      <span style="color:#e6db74">&#34;BuyShare&#34;</span><span style="color:#f92672">:</span> {                                         <span style="color:#75715e">// Purchase of shares (with From as the capital account)
</span><span style="color:#75715e"></span>        <span style="color:#e6db74">&#34;Value&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;2000000000000000000&#34;</span>,                        <span style="color:#75715e">// Purchase amount in Ta
</span><span style="color:#75715e"></span>        <span style="color:#e6db74">&#34;Vote&#34;</span><span style="color:#f92672">:</span>  <span style="color:#e6db74">&#34;0x8423cdaf......630a882a14&#34;</span>,                 <span style="color:#75715e">// SOLO voting address
</span><span style="color:#75715e"></span>        <span style="color:#e6db74">&#34;Pool&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x8414cdd......9df62dbda25b&#34;</span>                  <span style="color:#75715e">// Optional, StakingNode ID
</span><span style="color:#75715e"></span>      },
      <span style="color:#e6db74">&#34;Contract&#34;</span><span style="color:#f92672">:</span> {                                         <span style="color:#75715e">// Calling a smart contract
</span><span style="color:#75715e"></span>        <span style="color:#e6db74">&#34;Currency&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;ZORRO&#34;</span>,                                    <span style="color:#75715e">// Currency of incoming assets
</span><span style="color:#75715e"></span>        <span style="color:#e6db74">&#34;Value&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;1000000000&#34;</span>,                                 <span style="color:#75715e">// Amount of incoming assets, unit Ta
</span><span style="color:#75715e"></span>        <span style="color:#e6db74">&#34;To&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x59bd488f......4e16a2e2b0&#34;</span>,                    <span style="color:#75715e">// Contract address. If it is empty, create a smart contract.
</span><span style="color:#75715e"></span>        <span style="color:#e6db74">&#34;Data&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x233892....228efad&#34;</span>                          <span style="color:#75715e">// Data for smart contracts
</span><span style="color:#75715e"></span>      }
    },
    <span style="color:#e6db74">&#34;Receptions&#34;</span><span style="color:#f92672">:</span> [{                                    <span style="color:#75715e">// Recipient Information
</span><span style="color:#75715e"></span>        <span style="color:#e6db74">&#34;Addr&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x8423cdaf......630a882a14&#34;</span>,             <span style="color:#75715e">// Acceptor PKr | PK, PK will be automatically converted to PKr
</span><span style="color:#75715e"></span>        <span style="color:#e6db74">&#34;Currency&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;ZORRO&#34;</span>,                               <span style="color:#75715e">// Currency name
</span><span style="color:#75715e"></span>        <span style="color:#e6db74">&#34;Value&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">900000000000000000</span>                       <span style="color:#75715e">// Number of coins
</span><span style="color:#75715e"></span>    }],
    <span style="color:#e6db74">&#34;Roots&#34;</span><span style="color:#f92672">:</span> []                                         <span style="color:#75715e">// Which UTXOs need to be used, null values ​​represent automatic selection
</span><span style="color:#75715e"></span>  }]
}
</code></pre></div><ul>
<li>response</li>
</ul>
<ul>
<li>The structure returned by this method is relatively complicated, and the result can be directly passed to the offline client for signature.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
    <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
    <span style="color:#e6db74">&#34;result&#34;</span><span style="color:#f92672">:</span> {
    <span style="color:#e6db74">&#34;Gas&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">25000</span>,
    <span style="color:#e6db74">&#34;GasPrice&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1000000000</span>,
    <span style="color:#e6db74">&#34;From&#34;</span><span style="color:#f92672">:</span> {
        <span style="color:#e6db74">&#34;SKr&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x00000000......00000000000&#34;</span>,
        <span style="color:#e6db74">&#34;PKr&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xb28e17a7......ad09bf320&#34;</span>
    },
    <span style="color:#e6db74">&#34;Ins&#34;</span><span style="color:#f92672">:</span> [{
        <span style="color:#e6db74">&#34;SKr&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x00000000......00000000000&#34;</span>,
        <span style="color:#e6db74">&#34;Out&#34;</span><span style="color:#f92672">:</span> {
            <span style="color:#e6db74">&#34;Root&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x13ca7a0......75a3706b0&#34;</span>,
            <span style="color:#e6db74">&#34;State&#34;</span><span style="color:#f92672">:</span> {
                <span style="color:#e6db74">&#34;OS&#34;</span><span style="color:#f92672">:</span> {
                    <span style="color:#e6db74">&#34;Index&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
                    <span style="color:#e6db74">&#34;Out_O&#34;</span><span style="color:#f92672">:</span> {
                        <span style="color:#e6db74">&#34;Addr&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x67dc2f42a063......b0cd449994&#34;</span>,
                        <span style="color:#e6db74">&#34;Asset&#34;</span><span style="color:#f92672">:</span> {
                            <span style="color:#e6db74">&#34;Tkn&#34;</span><span style="color:#f92672">:</span> {
                                <span style="color:#e6db74">&#34;Currency&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x0000000......0000005345524f&#34;</span>,
                                <span style="color:#e6db74">&#34;Value&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1000000000000000000</span>
                            },
                            <span style="color:#e6db74">&#34;Tkt&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>
                        },
                        <span style="color:#e6db74">&#34;Memo&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x00000000......0000000000&#34;</span>
                    },
                    <span style="color:#e6db74">&#34;Out_Z&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>,
                    <span style="color:#e6db74">&#34;OutCM&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xedfe90dbc76......c7e2454371e22&#34;</span>,
                    <span style="color:#e6db74">&#34;RootCM&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xe07a24781......1d037f9412c23&#34;</span>
                },
                <span style="color:#e6db74">&#34;TxHash&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x0000000000......000000000000&#34;</span>,
                <span style="color:#e6db74">&#34;Num&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>
            }
        },
        <span style="color:#e6db74">&#34;Witness&#34;</span><span style="color:#f92672">:</span> {
            <span style="color:#e6db74">&#34;Pos&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x1&#34;</span>,
            <span style="color:#e6db74">&#34;Paths&#34;</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;0xea8a7fa27d4c......565c0ca6bf7a8&#34;</span>, 
                <span style="color:#e6db74">&#34;0x2e6831a00874......35c4d21d5cd07&#34;</span>, 
                <span style="color:#e6db74">&#34;0x7812d8320911.......1435b58078af&#34;</span>, 
                <span style="color:#e6db74">&#34;0x47f3115ed518.......29feed9d623&#34;</span>
                ......
            ],
            <span style="color:#e6db74">&#34;Anchor&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xa9623b4c88......508834be8a7&#34;</span>
        }
    }],
    <span style="color:#e6db74">&#34;Outs&#34;</span><span style="color:#f92672">:</span> [{
        <span style="color:#e6db74">&#34;PKr&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x8423cdaf21d......630a882a14&#34;</span>,
        <span style="color:#e6db74">&#34;Asset&#34;</span><span style="color:#f92672">:</span> {
            <span style="color:#e6db74">&#34;Tkn&#34;</span><span style="color:#f92672">:</span> {
                <span style="color:#e6db74">&#34;Currency&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x000......005345524f&#34;</span>,
                <span style="color:#e6db74">&#34;Value&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">900000000000000000</span>
            },
            <span style="color:#e6db74">&#34;Tkt&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>
        },
        <span style="color:#e6db74">&#34;Memo&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x000000......0000000&#34;</span>
    }, {
        <span style="color:#e6db74">&#34;PKr&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xb28e17a7d1d......4b740ad09bf320&#34;</span>,
        <span style="color:#e6db74">&#34;Asset&#34;</span><span style="color:#f92672">:</span> {
            <span style="color:#e6db74">&#34;Tkn&#34;</span><span style="color:#f92672">:</span> {
                <span style="color:#e6db74">&#34;Currency&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x000000......0005345524f&#34;</span>,
                <span style="color:#e6db74">&#34;Value&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">99975000000000000</span>
            },
            <span style="color:#e6db74">&#34;Tkt&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>
        },
        <span style="color:#e6db74">&#34;Memo&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x00000000......000000000&#34;</span>
    }]
  },
  <span style="color:#e6db74">&#34;error&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>
}
</code></pre></div></li>
<li>
<p><strong>console</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">txParam</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">genTx</span>({
    <span style="color:#e6db74">&#34;From&#34;</span><span style="color:#f92672">:</span>  <span style="color:#a6e22e">web3</span>.<span style="color:#a6e22e">addressToHex</span>(<span style="color:#a6e22e">zorro</span>.<span style="color:#a6e22e">accounts</span>[<span style="color:#ae81ff">0</span>]),
    <span style="color:#e6db74">&#34;Gas&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">25000</span>,
    <span style="color:#e6db74">&#34;GasPrice&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1000000000</span>,
    <span style="color:#e6db74">&#34;Receptions&#34;</span><span style="color:#f92672">:</span> [{
        <span style="color:#e6db74">&#34;Addr&#34;</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">web3</span>.<span style="color:#a6e22e">addressToHex</span>(<span style="color:#a6e22e">zorro</span>.<span style="color:#a6e22e">genPKr</span>(<span style="color:#a6e22e">zorro</span>.<span style="color:#a6e22e">accounts</span>[<span style="color:#ae81ff">1</span>])),
        <span style="color:#e6db74">&#34;Currency&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;ZORRO&#34;</span>,
        <span style="color:#e6db74">&#34;Value&#34;</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">web3</span>.<span style="color:#a6e22e">toTa</span>(<span style="color:#ae81ff">1</span>)
    }],
    <span style="color:#e6db74">&#34;Roots&#34;</span><span style="color:#f92672">:</span> []
})
<span style="color:#75715e">// txParam returns the same result as jsonrpc
</span></code></pre></div><h3 id="genmergetx">
  GenMergeTx
  <a class="anchor" href="#genmergetx">#</a>
</h3>
<ul>
<li>
<p>Offline signed version of UTXO merge</p>
</li>
<li>
<p><strong>jsonrpc</strong></p>
<ul>
<li>request</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
    <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
    <span style="color:#e6db74">&#34;jsonrpc&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;2.0&#34;</span>,
    <span style="color:#e6db74">&#34;method&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;exchange_genMergeTx&#34;</span>,
    <span style="color:#e6db74">&#34;params&#34;</span><span style="color:#f92672">:</span> [{
        <span style="color:#e6db74">&#34;From&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x0dbd9c0......9304201ea6&#34;</span>,                <span style="color:#75715e">// Account&#39;s PK
</span><span style="color:#75715e"></span>        <span style="color:#e6db74">&#34;To&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x8423cdaf......630a882a14&#34;</span>,                 <span style="color:#75715e">// Merge to receipt code (PKr), it will be generated automatically if it is empty。
</span><span style="color:#75715e"></span>        <span style="color:#e6db74">&#34;Currency&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;ZORRO&#34;</span>,                                <span style="color:#75715e">// The name of the currency to be merged
</span><span style="color:#75715e"></span>        <span style="color:#e6db74">&#34;Zcount&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>,                                     <span style="color:#75715e">// Maximum number of secret text UTXO merged
</span><span style="color:#75715e"></span>       <span style="color:#e6db74">&#34;Left&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>                                          <span style="color:#75715e">// How many UTXOs are left
</span><span style="color:#75715e"></span>    }]
}
</code></pre></div><ul>
<li>
<p>response</p>
<p>same as <code>genTx</code></p>
</li>
</ul>
</li>
<li>
<p><strong>console</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">txParam</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">genMergeTx</span>({
    <span style="color:#e6db74">&#34;From&#34;</span><span style="color:#f92672">:</span>  <span style="color:#a6e22e">web3</span>.<span style="color:#a6e22e">addressToHex</span>(<span style="color:#a6e22e">zorro</span>.<span style="color:#a6e22e">accounts</span>[<span style="color:#ae81ff">0</span>]),
    <span style="color:#e6db74">&#34;To&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x8423cdaf......630a882a14&#34;</span>,
  <span style="color:#e6db74">&#34;Currency&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;ZORRO&#34;</span>, 
  <span style="color:#e6db74">&#34;Zcount&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span>, 
  <span style="color:#e6db74">&#34;Left&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span> 
})
<span style="color:#75715e">// txParam returns the same result as jsonrpc
</span></code></pre></div><h3 id="gettx">
  GetTx
  <a class="anchor" href="#gettx">#</a>
</h3>
<ul>
<li>
<p>Get transaction details</p>
</li>
<li>
<p><strong>jsonrpc</strong></p>
<ul>
<li>request</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
    <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
    <span style="color:#e6db74">&#34;jsonrpc&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;2.0&#34;</span>,
    <span style="color:#e6db74">&#34;method&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;exchange_getTx&#34;</span>,
    <span style="color:#e6db74">&#34;params&#34;</span><span style="color:#f92672">:</span> [
      <span style="color:#e6db74">&#34;0xf8f2269......66d181&#34;</span>           <span style="color:#75715e">// Transaction Hash
</span><span style="color:#75715e"></span>    ]
}
</code></pre></div><ul>
<li>
<p>response</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
    <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
    <span style="color:#e6db74">&#34;result&#34;</span><span style="color:#f92672">:</span> {
      <span style="color:#a6e22e">BlockHash</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x42fee3......d82bd53&#34;</span>,         <span style="color:#75715e">// Block Hash
</span><span style="color:#75715e"></span>      <span style="color:#a6e22e">BlockNumber</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">108</span>,                           <span style="color:#75715e">// Block number
</span><span style="color:#75715e"></span>      <span style="color:#a6e22e">Outs</span><span style="color:#f92672">:</span> [
        {                                    <span style="color:#75715e">// Out list
</span><span style="color:#75715e"></span>          <span style="color:#a6e22e">Currency</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;ZORRO&#34;</span>,                           <span style="color:#75715e">//Currency name
</span><span style="color:#75715e"></span>          <span style="color:#a6e22e">PK</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x40aa8......f4d08a96&#34;</span>,                <span style="color:#75715e">// Account public key
</span><span style="color:#75715e"></span>          <span style="color:#a6e22e">Pkr</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x924f6b6c......09bf320&#34;</span>,             <span style="color:#75715e">// Receipt code
</span><span style="color:#75715e"></span>          <span style="color:#a6e22e">Root</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x0d57fa92.....879d811&#34;</span>,             <span style="color:#75715e">//Root
</span><span style="color:#75715e"></span>          <span style="color:#a6e22e">Value</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">4999925000000000000</span>                  <span style="color:#75715e">//Amount
</span><span style="color:#75715e"></span>        },
        ......
      ],
      <span style="color:#a6e22e">Ins</span><span style="color:#f92672">:</span> [                               <span style="color:#75715e">// Root list of transaction input UTXO
</span><span style="color:#75715e"></span>        <span style="color:#e6db74">&#34;0x0dbd9c0......9304201ea6&#34;</span>
      ],
      <span style="color:#a6e22e">TxHash</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xf8f2269......66d181&#34;</span>      <span style="color:#75715e">// Transaction hash
</span><span style="color:#75715e"></span>      <span style="color:#a6e22e">Fee</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">25000000000000</span>,                 <span style="color:#75715e">//gas fee
</span><span style="color:#75715e"></span>      <span style="color:#a6e22e">Timestamp</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1561442217</span>                <span style="color:#75715e">// Timestamp of transaction
</span><span style="color:#75715e"></span>    },
    <span style="color:#e6db74">&#34;error&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>
}
</code></pre></div></li>
</ul>
</li>
<li>
<p><strong>console</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">getTx</span>(<span style="color:#e6db74">&#34;0xf8f2269......66d181&#34;</span>)
{
    <span style="color:#a6e22e">BlockHash</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x42fee3......d82bd53&#34;</span>,
    <span style="color:#a6e22e">BlockNumber</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">108</span>,
    <span style="color:#a6e22e">Outs</span><span style="color:#f92672">:</span> [
      {
        <span style="color:#a6e22e">Currency</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;ZORRO&#34;</span>,
        <span style="color:#a6e22e">PK</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x40aa8......f4d08a96&#34;</span>,
        <span style="color:#a6e22e">Pkr</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x924f6b6c......09bf320&#34;</span>,
        <span style="color:#a6e22e">Value</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">4999925000000000000</span>
      },
      ......
   ],
   <span style="color:#a6e22e">TxHash</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xf8f2269......66d181&#34;</span>
}
</code></pre></div><h3 id="gentxwithsign">
  GenTxWithSign
  <a class="anchor" href="#gentxwithsign">#</a>
</h3>
<ul>
<li>
<p>Online version of transaction generation</p>
</li>
<li>
<p><strong>jsonrpc</strong></p>
<ul>
<li>request</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
    <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
    <span style="color:#e6db74">&#34;jsonrpc&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;2.0&#34;</span>,
    <span style="color:#e6db74">&#34;method&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;exchange_genTxWithSign&#34;</span>,
    <span style="color:#e6db74">&#34;params&#34;</span><span style="color:#f92672">:</span> [{
      <span style="color:#e6db74">&#34;From&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x0dbd9c0......9304201ea6&#34;</span>,                <span style="color:#75715e">// Account&#39;s PK
</span><span style="color:#75715e"></span>      <span style="color:#e6db74">&#34;RefundTo&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x8423cdaf......630a882a14&#34;</span>,          <span style="color:#75715e">// Change receipt code (PKr), if it is empty, it will be generated automatically.
</span><span style="color:#75715e"></span>      <span style="color:#e6db74">&#34;Gas&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">25000</span>,                                       <span style="color:#75715e">// Maximum gas consumption, minimum 25000
</span><span style="color:#75715e"></span>      <span style="color:#e6db74">&#34;GasPrice&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1000000000</span>,                            <span style="color:#75715e">// GasPrice, default 1Gta
</span><span style="color:#75715e"></span>      <span style="color:#e6db74">&#34;Receptions&#34;</span><span style="color:#f92672">:</span> [{                                   <span style="color:#75715e">// Recipient Information
</span><span style="color:#75715e"></span>          <span style="color:#e6db74">&#34;Addr&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x8423cdaf......630a882a14&#34;</span>,          <span style="color:#75715e">// Recipient PKr            &#34;Currency&#34;: &#34;ZORRO&#34;,                               // Currency name
</span><span style="color:#75715e"></span>          <span style="color:#e6db74">&#34;Value&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">900000000000000000</span>                       <span style="color:#75715e">// Number of coins
</span><span style="color:#75715e"></span>      }],
      <span style="color:#e6db74">&#34;Roots&#34;</span><span style="color:#f92672">:</span> []                                         <span style="color:#75715e">// Which UTXOs need to be used, null values ​​represent automatic selection。
</span><span style="color:#75715e"></span>    }]
}
</code></pre></div><ul>
<li>response
The signed data can be directly submitted to <code>CommitTx</code> and sent to the entire network. At the same time, the offline signature results after <code>GenTx</code> are consistent with the <code>result</code> of <code>GenTxWithSign</code>.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
    <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
    <span style="color:#e6db74">&#34;result&#34;</span><span style="color:#f92672">:</span> {
    <span style="color:#e6db74">&#34;Gas&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x61a8&#34;</span>,
    <span style="color:#e6db74">&#34;GasPrice&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x3b9aca00&#34;</span>,
    <span style="color:#e6db74">&#34;Tx&#34;</span><span style="color:#f92672">:</span> {
        <span style="color:#e6db74">&#34;Ehash&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x59bd488......16a2e2b0&#34;</span>,
        <span style="color:#e6db74">&#34;From&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xb28e17a7......d09bf320&#34;</span>,
        <span style="color:#e6db74">&#34;Fee&#34;</span><span style="color:#f92672">:</span> {
            <span style="color:#e6db74">&#34;Currency&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x00000000000......05345524f&#34;</span>,
            <span style="color:#e6db74">&#34;Value&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">25000000000000</span>
        },
        <span style="color:#e6db74">&#34;Sign&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x7937304f......8fe12d803&#34;</span>,
        <span style="color:#e6db74">&#34;Bcr&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x576cc80af......fc35a82&#34;</span>,
        <span style="color:#e6db74">&#34;Bsign&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xea0c7a......2aadcb801&#34;</span>,
        <span style="color:#e6db74">&#34;Desc_Z&#34;</span><span style="color:#f92672">:</span> {
            <span style="color:#e6db74">&#34;Ins&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>,
            <span style="color:#e6db74">&#34;Outs&#34;</span><span style="color:#f92672">:</span> [{
                <span style="color:#e6db74">&#34;AssetCM&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x23b24db7363......af614d40861f28&#34;</span>,
                <span style="color:#e6db74">&#34;OutCM&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x16653600938......cde422f18ac00&#34;</span>,
                <span style="color:#e6db74">&#34;RPK&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xc5740db4......4efa5411d9&#34;</span>,
                <span style="color:#e6db74">&#34;EInfo&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x1f0d1dc5f......df00209c22&#34;</span>,
                <span style="color:#e6db74">&#34;PKr&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x8423cda.......630a882a14&#34;</span>,
                <span style="color:#e6db74">&#34;Proof&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x030d19322......c16ba7104&#34;</span>
            }, {
                <span style="color:#e6db74">&#34;AssetCM&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x73280eb9......9d6d5f042c&#34;</span>,
                <span style="color:#e6db74">&#34;OutCM&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x92cace7c......1a5a528c&#34;</span>,
                <span style="color:#e6db74">&#34;RPK&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x8126a4......06607d0ee&#34;</span>,
                <span style="color:#e6db74">&#34;EInfo&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x5fa2c37......5101d8f3&#34;</span>,
                <span style="color:#e6db74">&#34;PKr&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xb28e1......09bf320&#34;</span>,
                <span style="color:#e6db74">&#34;Proof&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x026a8c617......829600c&#34;</span>
            }]
        },
        <span style="color:#e6db74">&#34;Desc_O&#34;</span><span style="color:#f92672">:</span> {
            <span style="color:#e6db74">&#34;Ins&#34;</span><span style="color:#f92672">:</span> [{
                <span style="color:#e6db74">&#34;Root&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x13ca7a0......75a3706b0&#34;</span>,
                <span style="color:#e6db74">&#34;Nil&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xc179f8......9acf98d&#34;</span>,
                <span style="color:#e6db74">&#34;Sign&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0xa4ef43839......eb19b6a3701&#34;</span>
            }],
            <span style="color:#e6db74">&#34;Outs&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>
        },
        <span style="color:#e6db74">&#34;Desc_Pkg&#34;</span><span style="color:#f92672">:</span> {
            <span style="color:#e6db74">&#34;Create&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>,
            <span style="color:#e6db74">&#34;Transfer&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>,
            <span style="color:#e6db74">&#34;Close&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>
        }
    },
    <span style="color:#e6db74">&#34;Hash&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x0dd3a1112......11af453498&#34;</span>,      <span style="color:#75715e">//Transaction Hash
</span><span style="color:#75715e"></span>    <span style="color:#e6db74">&#34;Roots&#34;</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;0x13ca7a0......75a3706b0&#34;</span>]       <span style="color:#75715e">// Root list of input UTXO v1.0.0-rc7
</span><span style="color:#75715e"></span>  },
  <span style="color:#e6db74">&#34;error&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>
}
</code></pre></div></li>
<li>
<p><strong>console</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">personal</span>.<span style="color:#a6e22e">unlockAccount</span>(<span style="color:#a6e22e">zorro</span>.<span style="color:#a6e22e">accounts</span>[<span style="color:#ae81ff">0</span>],<span style="color:#e6db74">&#34;123456&#34;</span>)
<span style="color:#66d9ef">true</span>
<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">tx</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">genTxWithSign</span>({
    <span style="color:#e6db74">&#34;From&#34;</span><span style="color:#f92672">:</span>  <span style="color:#a6e22e">web3</span>.<span style="color:#a6e22e">addressToHex</span>(<span style="color:#a6e22e">zorro</span>.<span style="color:#a6e22e">accounts</span>[<span style="color:#ae81ff">0</span>]),
    <span style="color:#e6db74">&#34;Gas&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">25000</span>,
    <span style="color:#e6db74">&#34;GasPrice&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1000000000</span>,
    <span style="color:#e6db74">&#34;Receptions&#34;</span><span style="color:#f92672">:</span> [{
        <span style="color:#e6db74">&#34;Addr&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x4546ffe893......eead5d7a84&#34;</span>,
        <span style="color:#e6db74">&#34;Currency&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;ZORRO&#34;</span>,
        <span style="color:#e6db74">&#34;Value&#34;</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">web3</span>.<span style="color:#a6e22e">toTa</span>(<span style="color:#ae81ff">1</span>)
    }],
    <span style="color:#e6db74">&#34;Roots&#34;</span><span style="color:#f92672">:</span> []
})

<span style="color:#75715e">// tx is the same as the result returned by jsonrpc
</span></code></pre></div><h3 id="committx">
  CommitTx
  <a class="anchor" href="#committx">#</a>
</h3>
<ul>
<li>
<p>Submit the signed transaction to the transaction pool</p>
</li>
<li>
<p><strong>jsonrpc</strong></p>
</li>
<li>
<p>request</p>
<ul>
<li>Consistent with the output of <code>GenTxWithSign</code></li>
</ul>
</li>
<li>
<p>response</p>
<ul>
<li>No error indicates that it has been placed in the transaction pool and is waiting for <code>zro</code> to be synchronized to the entire network.</li>
</ul>
</li>
<li>
<p><strong>console</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">commitTx</span>(<span style="color:#a6e22e">tx</span>)   <span style="color:#75715e">// tx is the result of `GenTxWithSign` or offline signing
</span><span style="color:#75715e"></span><span style="color:#66d9ef">null</span>
<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">zorro</span>.<span style="color:#a6e22e">getTransactionReceipt</span>(<span style="color:#a6e22e">tx</span>.<span style="color:#a6e22e">Hash</span>)
{
  <span style="color:#a6e22e">blockHash</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x780cb2866......d27218ff8e&#34;</span>,
  <span style="color:#a6e22e">blockNumber</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">107</span>,
  <span style="color:#a6e22e">contractAddress</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>,
  <span style="color:#a6e22e">cumulativeGasUsed</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">25000</span>,
  <span style="color:#a6e22e">from</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;24WSzZB......gkeQJtGP&#34;</span>,
  <span style="color:#a6e22e">gasUsed</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">25000</span>,
  <span style="color:#a6e22e">logs</span><span style="color:#f92672">:</span> [],
  <span style="color:#a6e22e">logsBloom</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x00000000......000000000&#34;</span>,
  <span style="color:#a6e22e">root</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x06414dcf......78ea7c4218&#34;</span>,
  <span style="color:#a6e22e">status</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x1&#34;</span>,
  <span style="color:#a6e22e">to</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>,
  <span style="color:#a6e22e">transactionHash</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0x1bae9132......7ecd7172d36&#34;</span>,
  <span style="color:#a6e22e">transactionIndex</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>
}
</code></pre></div><h3 id="getpksynced">
  GetPkSynced
  <a class="anchor" href="#getpksynced">#</a>
</h3>
<ul>
<li>
<p>The analysis of the exchange&rsquo;s current progress</p>
</li>
<li>
<p><strong>jsonrpc</strong></p>
<ul>
<li>request</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
    <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
    <span style="color:#e6db74">&#34;jsonrpc&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;2.0&#34;</span>,
    <span style="color:#e6db74">&#34;method&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;exchange_getPkSynced&#34;</span>,
    <span style="color:#e6db74">&#34;params&#34;</span><span style="color:#f92672">:</span> [
        <span style="color:#e6db74">&#34;0x0dbd9c0......9304201ea6&#34;</span>,                <span style="color:#75715e">//账户的PK
</span><span style="color:#75715e"></span>    ]
}
</code></pre></div><ul>
<li>response</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
    <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
      <span style="color:#e6db74">&#34;result&#34;</span><span style="color:#f92672">:</span> {
      <span style="color:#e6db74">&#39;currentBlock&#39;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">121</span>,                  <span style="color:#75715e">// Current block height
</span><span style="color:#75715e"></span>      <span style="color:#e6db74">&#39;currentPKBlock&#39;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">121</span>,                <span style="color:#75715e">// block height analyzed by exchange
</span><span style="color:#75715e"></span>      <span style="color:#e6db74">&#39;highestBlock&#39;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">121</span>                   <span style="color:#75715e">// Current block height across the network
</span><span style="color:#75715e"></span>      <span style="color:#e6db74">&#39;utxoCount&#39;</span><span style="color:#f92672">:</span> {
        <span style="color:#e6db74">&#39;ZORRO&#39;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">100</span>                          <span style="color:#75715e">// ZORRO current number of UTXO, need to call getBalances first
</span><span style="color:#75715e"></span>      }
    },
  <span style="color:#e6db74">&#34;error&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>
}
</code></pre></div></li>
<li>
<p><strong>console</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">getPkSynced</span>(<span style="color:#e6db74">&#34;0x0dbd9c0....9304201ea6&#34;</span>)
{
  <span style="color:#a6e22e">currentBlock</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">121</span>,
  <span style="color:#a6e22e">currentPKBlock</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">121</span>,
  <span style="color:#a6e22e">highestBlock</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">121</span>
}
</code></pre></div><h3 id="merge">
  Merge
  <a class="anchor" href="#merge">#</a>
</h3>
<ul>
<li>
<p>Online signature version of UTXO merged</p>
</li>
<li>
<p><strong>jsonrpc</strong></p>
<ul>
<li>request</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
  <span style="color:#e6db74">&#34;jsonrpc&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;2.0&#34;</span>,
  <span style="color:#e6db74">&#34;method&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;exchange_merge&#34;</span>,
  <span style="color:#e6db74">&#34;params&#34;</span><span style="color:#f92672">:</span> [
      <span style="color:#e6db74">&#34;0x0dbd9c0......9304201ea6&#34;</span>,                <span style="color:#75715e">// Account&#39;s PK
</span><span style="color:#75715e"></span>      <span style="color:#e6db74">&#34;ZORRO&#34;</span>                                      <span style="color:#75715e">// Currency of Merge
</span><span style="color:#75715e"></span>  ]
}
</code></pre></div><ul>
<li>response</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
  <span style="color:#e6db74">&#34;result&#34;</span><span style="color:#f92672">:</span> {
    <span style="color:#e6db74">&#34;0x1bae9132......7ecd7172d36&#34;</span>              <span style="color:#75715e">// Transaction Hash generated by Merge
</span><span style="color:#75715e"></span>  },
  <span style="color:#e6db74">&#34;error&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>
}
</code></pre></div></li>
<li>
<p><strong>console</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">merge</span>(<span style="color:#e6db74">&#34;0x0dbd9c0......9304201ea6&#34;</span>,<span style="color:#e6db74">&#34;ZORRO&#34;</span>)
<span style="color:#e6db74">&#34;0x1bae9132......7ecd7172d36&#34;</span>
</code></pre></div><h3 id="validaddress">
  ValidAddress
  <a class="anchor" href="#validaddress">#</a>
</h3>
<ul>
<li>
<p>Determine whether PK or PKr is effective</p>
</li>
<li>
<p><strong>jsonrpc</strong></p>
<ul>
<li>request</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
    <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
    <span style="color:#e6db74">&#34;jsonrpc&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;2.0&#34;</span>,
    <span style="color:#e6db74">&#34;method&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;exchange_validAddress&#34;</span>,
    <span style="color:#e6db74">&#34;params&#34;</span><span style="color:#f92672">:</span> [
      <span style="color:#e6db74">&#34;0x0dbd9c0......9304201ea6&#34;</span>                 <span style="color:#75715e">// Account&#39;s PK or PKr
</span><span style="color:#75715e"></span>    ]
}
</code></pre></div><ul>
<li>response</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
  <span style="color:#e6db74">&#34;result&#34;</span><span style="color:#f92672">:</span> {
  <span style="color:#66d9ef">true</span>                                        <span style="color:#75715e">// it is effective
</span><span style="color:#75715e"></span>  },
  <span style="color:#e6db74">&#34;error&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>
}
</code></pre></div></li>
<li>
<p><strong>console</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">validAddress</span>(<span style="color:#e6db74">&#34;0x0dbd9c0......9304201ea6&#34;</span>)
<span style="color:#66d9ef">true</span>
</code></pre></div><h3 id="getlockedbalances">
  GetLockedBalances
  <a class="anchor" href="#getlockedbalances">#</a>
</h3>
<ul>
<li>
<p>Get locked amount</p>
</li>
<li>
<p><strong>jsonrpc</strong></p>
<ul>
<li>request</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
    <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
    <span style="color:#e6db74">&#34;jsonrpc&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;2.0&#34;</span>,
    <span style="color:#e6db74">&#34;method&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;exchange_getLockedBalances&#34;</span>,
    <span style="color:#e6db74">&#34;params&#34;</span><span style="color:#f92672">:</span> [
      <span style="color:#e6db74">&#34;0x0dbd9c0......9304201ea6&#34;</span>                 <span style="color:#75715e">// Account&#39;s PK
</span><span style="color:#75715e"></span>    ]
}
</code></pre></div><ul>
<li>response</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
  <span style="color:#e6db74">&#34;result&#34;</span><span style="color:#f92672">:</span> {
  <span style="color:#e6db74">&#34;ZORRO&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">7000</span>                                <span style="color:#75715e">// Amount that could be locked
</span><span style="color:#75715e"></span>  },
  <span style="color:#e6db74">&#34;error&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>
}
</code></pre></div></li>
<li>
<p><strong>console</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">getLockedBalances</span>(<span style="color:#e6db74">&#34;0x0dbd9c0......9304201ea6&#34;</span>)
{
  <span style="color:#e6db74">&#34;ZORRO&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">7000</span>
}
</code></pre></div><h3 id="getmaxavailable">
  GetMaxAvailable
  <a class="anchor" href="#getmaxavailable">#</a>
</h3>
<ul>
<li>
<p>Get the maximum amount that can currently be transferred</p>
</li>
<li>
<p><strong>jsonrpc</strong></p>
<ul>
<li>request</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
  <span style="color:#e6db74">&#34;jsonrpc&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;2.0&#34;</span>,
  <span style="color:#e6db74">&#34;method&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;exchange_getMaxAvailable&#34;</span>,
  <span style="color:#e6db74">&#34;params&#34;</span><span style="color:#f92672">:</span> [
    <span style="color:#e6db74">&#34;0x0dbd9c0......9304201ea6&#34;</span>,                 <span style="color:#75715e">// Account&#39;s PK
</span><span style="color:#75715e"></span>    <span style="color:#e6db74">&#34;ZORRO&#34;</span>                                       <span style="color:#75715e">// Currency name
</span><span style="color:#75715e"></span>  ]
}

<span style="color:#f92672">-</span> <span style="color:#a6e22e">response</span>

<span style="color:#960050;background-color:#1e0010">​</span><span style="color:#e6db74">```javascript
</span><span style="color:#e6db74">{
</span><span style="color:#e6db74">  &#34;id&#34;: 0,
</span><span style="color:#e6db74">  &#34;result&#34;: 700000,                             // Maximum one-time transfer amount
</span><span style="color:#e6db74">  &#34;error&#34;: null
</span><span style="color:#e6db74">}
</span></code></pre></div></li>
<li>
<p><strong>console</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">getMaxAvailable</span>(<span style="color:#e6db74">&#34;0x0dbd9c0......9304201ea6&#34;</span>, <span style="color:#e6db74">&#34;ZORRO&#34;</span>)
<span style="color:#ae81ff">700000</span>
</code></pre></div><h3 id="clearusedflag">
  ClearUsedFlag
  <a class="anchor" href="#clearusedflag">#</a>
</h3>
<ul>
<li>
<p>Clear lock flag based on pk</p>
</li>
<li>
<p><strong>jsonrpc</strong></p>
<ul>
<li>request</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
  <span style="color:#e6db74">&#34;jsonrpc&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;2.0&#34;</span>,
  <span style="color:#e6db74">&#34;method&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;exchange_clearUsedFlag&#34;</span>,
  <span style="color:#e6db74">&#34;params&#34;</span><span style="color:#f92672">:</span> [
    <span style="color:#e6db74">&#34;0x0dbd9c0......9304201ea6&#34;</span>                          <span style="color:#75715e">// Account&#39;s PK
</span><span style="color:#75715e"></span>  ]
}

<span style="color:#f92672">-</span> <span style="color:#a6e22e">response</span>

<span style="color:#960050;background-color:#1e0010">​</span><span style="color:#e6db74">```javascript
</span><span style="color:#e6db74">{
</span><span style="color:#e6db74">  &#34;id&#34;: 0,
</span><span style="color:#e6db74">  &#34;result&#34;: 3,                       // Cleared 3 UTXO marks
</span><span style="color:#e6db74">  &#34;error&#34;: null
</span><span style="color:#e6db74">}
</span></code></pre></div></li>
<li>
<p><strong>console</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">clearUsedFlag</span>(<span style="color:#e6db74">&#34;0x0dbd9c0......9304201ea6&#34;</span>)
<span style="color:#ae81ff">3</span>
</code></pre></div><h3 id="clearusedflagforroot">
  ClearUsedFlagForRoot
  <a class="anchor" href="#clearusedflagforroot">#</a>
</h3>
<ul>
<li>Clear lock mark based on UTXO&rsquo;s Root</li>
</ul>
<ul>
<li>
<p><strong>jsonrpc</strong></p>
<ul>
<li>request</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
  <span style="color:#e6db74">&#34;jsonrpc&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;2.0&#34;</span>,
  <span style="color:#e6db74">&#34;method&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;exchange_clearUsedFlagForRoot&#34;</span>,
  <span style="color:#e6db74">&#34;params&#34;</span><span style="color:#f92672">:</span> [
    [
      <span style="color:#e6db74">&#34;0x13ca7a0......75a3706b0&#34;</span>,                 <span style="color:#75715e">//UTXO Root
</span><span style="color:#75715e"></span>      <span style="color:#e6db74">&#34;0x244ae92......976fa00bc&#34;</span>
    ]
  ]
}
</code></pre></div><ul>
<li>response</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
  <span style="color:#e6db74">&#34;result&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>,
  <span style="color:#e6db74">&#34;error&#34;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>
}
</code></pre></div></li>
<li>
<p><strong>console</strong></p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">exchange</span>.<span style="color:#a6e22e">clearUsedFlagForRoot</span>([<span style="color:#e6db74">&#34;0x0dbd9c0......9304201ea6&#34;</span>])
<span style="color:#66d9ef">null</span>
</code></pre></div><h2 id="suggested_listing_solution">
  Suggested_Listing_Solution
  <a class="anchor" href="#suggested_listing_solution">#</a>
</h2>
<h3 id="account_management">
  Account_management
  <a class="anchor" href="#account_management">#</a>
</h3>
<ul>
<li>Account generation
<ul>
<li>Generated via offline client
<ul>
<li>Randomly generate a 32bytes seed and save it securely</li>
<li>Call the account object of <code>js-zorro-client</code> to generate <code>TK</code> and <code>PK</code>
<ul>
<li>It is recommended to use the more secure SuperZK2.0 protocol to create accounts</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Generated by <code>zro</code>
<ul>
<li>Generate a new account by calling <code>personal.newAccount</code> in the <code>zro</code> console</li>
<li>Export the <code>seed</code> through <code>personal.exportRawKey</code> for safe keeping
<ul>
<li>You can also save the corresponding <code>keystore</code> file</li>
</ul>
</li>
<li>Get account <code>TK</code> through <code>zorro.getTk</code></li>
<li>Get account <code>PK</code> via <code>zorro.accounts</code></li>
</ul>
</li>
<li>Account import
<ul>
<li>Import personal <code>TK</code> by calling <code>personal.importTk</code> through <code>zro</code> console</li>
<li>Monitor the analysis of the <code>exchange</code> service through logs</li>
</ul>
</li>
</ul>
<h3 id="recharge_monitoring">
  Recharge_monitoring
  <a class="anchor" href="#recharge_monitoring">#</a>
</h3>
<ul>
<li>Call <code>exchange.GetRecords</code> to continuously synchronize new recharge records of the <code>PK</code> according to the block number.
<ul>
<li><strong>Note:</strong> ZORRO is a private public chain. When signing a transaction, the referenced <code>UTXO</code> needs to be proved. If there are more <code>UTXOs</code> referenced in the transaction, the transaction signature time will be very long. Therefore, it is necessary to merge the recharged <code>UTXO</code> daily, so that the user will have a good experience when withdrawing cash.</li>
<li>ZORRO provides a method for generating offline and non-offline signature merge <code>UTXO</code> transactions.
<ul>
<li>Off-line signing <a href="#GenMergeTx"><code>GenMergeTx</code></a></li>
<li>On-line signature <a href="#Merge"><code>Merge</code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="withdrawal">
  Withdrawal
  <a class="anchor" href="#withdrawal">#</a>
</h3>
<ul>
<li>Configure a <code>preTxParam</code> object (refer to the input of <code>GenTx</code>)</li>
<li>Offline signature method
<ul>
<li>Call <code>GenTx</code> to get the <code>txParam</code> object.</li>
<li>Call the <code>txsign</code> method signature of <code>js-zorro-client</code></li>
<li>Get signature results <code>tx</code></li>
</ul>
</li>
<li>Online signature method
<ul>
<li>Unlock the <code>account</code> of <code>zro</code></li>
<li>Call <code>GenTxWithSign</code> to generate signed transaction <code>tx</code></li>
</ul>
</li>
<li>Save the hash value of <code>tx</code></li>
<li>Call <code>CommitTx</code> to submit <code>tx</code> to the full node</li>
<li>Call <code>zorro.getTransactionReceipt</code> to scan the completion of the transaction</li>
<li>Since <code>UTXO</code> cannot be reused, and <code>genTx</code> will lock the <code>UTXO</code> used this time, it is recommended when generating transactions
<ul>
<li>Get the maximum amount that can be sent this time through <code>exchange.getMaxAvailable</code>
<ul>
<li>You need to merge <code>UTXO</code> to ensure that the current amount can be sent</li>
</ul>
</li>
<li>The value obtained by <code>exchange.getMaxAvailable</code> will change each time a transaction is generated, representing the amount that can be sent next time.
<ul>
<li>Call <code>exchange.getMaxAvailable</code> and <code>exchange.genTx | genTxWithSign</code> in a loop until <code>exchange.getMaxAvailable</code> is 0</li>
<li>Wait for new <code>UTXO</code> to be generated after sending the transaction</li>
</ul>
</li>
<li>If any transaction fails, in addition to repeatedly submitting the transaction, you can clear the lock on these <code>UTXO</code> through <code>exchange.ClearUsedFlag</code></li>
</ul>
</li>
</ul>
<h3 id="automatic_utxo_merger">
  Automatic_UTXO_Merger
  <a class="anchor" href="#automatic_utxo_merger">#</a>
</h3>
<ul>
<li>
<p>If it is online signature, you can use</p>
<ul>
<li><code>exchange’s</code> automatic merge function.
<ul>
<li>Add <code>--autoMerge</code> parameter when starting <code>zro</code></li>
<li>When the account under <code>pk</code> will do automatic UTXO merge regularly</li>
</ul>
</li>
<li>Call the <code>exchange.Merge</code> method in the console to merge manually</li>
</ul>
</li>
<li>
<p>The offline signing direction can use <code>exchange.genMergeTx</code> to configure a merge transaction</p>
<ul>
<li>The transaction is then sent after being signed offline</li>
</ul>
</li>
</ul>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">

  


  

  


  


<div class="book-languages" tabindex="0" aria-haspopup="true">
  <ul>
    <li class="flex align-center">
      <img src="/svg/translate.svg" class="book-icon" alt="Languages" />
      English
    </li> 
  </ul>

  <ul class="book-languages-list">
    
    <li class="active">
      <a href="https://Ethan-91.github.io/" class="flex align-center">
        <img src="/svg/translate.svg" class="book-icon" alt="Languages" />
        English
      </a>
    </li>
    
    <li class="">
      <a href="https://Ethan-91.github.io/zh/docs/course/exchange-interface/" class="flex align-center">
        <img src="/svg/translate.svg" class="book-icon" alt="Languages" />
        Chinese
      </a>
    </li>
    
  </ul>
</div>






</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#please_note_the_users_and_read_this_article_carefully">Please_note_the_users_and_read_this_article_carefully.</a></li>
    <li><a href="#account">Account</a>
      <ul>
        <li><a href="#seed">Seed</a></li>
        <li><a href="#skprivate_key">sk(Private_Key)</a></li>
        <li><a href="#tktracking_key">TK(Tracking_Key)</a></li>
        <li><a href="#pkpublic_key">PK(Public_Key)</a></li>
        <li><a href="#pkrreceipt_code">PKr(Receipt_Code)</a></li>
      </ul>
    </li>
    <li><a href="#offline_signature">Offline_Signature</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#import_account">Import_Account</a></li>
    <li><a href="#rpc_version_of_the_offline_interface">Rpc_version_of_the_offline_interface</a></li>
    <li><a href="#wallet_interface">Wallet_interface</a>
      <ul>
        <li></li>
        <li><a href="#getblockbynumber">GetBlockByNumber</a></li>
        <li><a href="#getblocksinfo">GetBlocksInfo</a></li>
        <li><a href="#getpkr">GetPkr</a></li>
        <li><a href="#getpkbypkr">GetPkByPkr</a></li>
        <li><a href="#getbalances">GetBalances</a></li>
        <li><a href="#getrecords">GetRecords</a></li>
        <li><a href="#gentx">GenTx</a></li>
        <li><a href="#genmergetx">GenMergeTx</a></li>
        <li><a href="#gettx">GetTx</a></li>
        <li><a href="#gentxwithsign">GenTxWithSign</a></li>
        <li><a href="#committx">CommitTx</a></li>
        <li><a href="#getpksynced">GetPkSynced</a></li>
        <li><a href="#merge">Merge</a></li>
        <li><a href="#validaddress">ValidAddress</a></li>
        <li><a href="#getlockedbalances">GetLockedBalances</a></li>
        <li><a href="#getmaxavailable">GetMaxAvailable</a></li>
        <li><a href="#clearusedflag">ClearUsedFlag</a></li>
        <li><a href="#clearusedflagforroot">ClearUsedFlagForRoot</a></li>
      </ul>
    </li>
    <li><a href="#suggested_listing_solution">Suggested_Listing_Solution</a>
      <ul>
        <li><a href="#account_management">Account_management</a></li>
        <li><a href="#recharge_monitoring">Recharge_monitoring</a></li>
        <li><a href="#withdrawal">Withdrawal</a></li>
        <li><a href="#automatic_utxo_merger">Automatic_UTXO_Merger</a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












