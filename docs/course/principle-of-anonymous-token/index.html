<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Anonymous Tokens Issuance Principle# ZORRO is the world&rsquo;s first privacy blockchain system that supports Turing&rsquo;s complete smart contracts. Since it supports smart contracts, it is certainly not a simple smart contracts &#43; anonymous coins. ZORRO deeply integrates the advantages of both: the openness of smart contracts and the closeness of privacy systems. With the support of the two features, ZORRO&rsquo;s smart contracts have very exciting features that can do some amazing things.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="Anonymous tokens issuance principle" />
<meta property="og:description" content="Anonymous Tokens Issuance Principle# ZORRO is the world&rsquo;s first privacy blockchain system that supports Turing&rsquo;s complete smart contracts. Since it supports smart contracts, it is certainly not a simple smart contracts &#43; anonymous coins. ZORRO deeply integrates the advantages of both: the openness of smart contracts and the closeness of privacy systems. With the support of the two features, ZORRO&rsquo;s smart contracts have very exciting features that can do some amazing things." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://Ethan-91.github.io/docs/course/principle-of-anonymous-token/" />

<title>Anonymous tokens issuance principle | ZORRO</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="alternate" hreflang="zh" href="https://Ethan-91.github.io/zh/docs/course/principle-of-anonymous-token/" title="匿名Token发行原理">

<link rel="stylesheet" href="/book.min.b3215d9d1d18d9051e7fbe8f256ff80e30f41d29073b86348e230d297b771002.css" integrity="sha256-syFdnR0Y2QUef76PJW/4DjD0HSkHO4Y0jiMNKXt3EAI=">
<script defer src="/en.search.min.88a517a499b999098a8e8b3e0562c5d902d3c5b21c6a48ea82992489b1c4fdf9.js" integrity="sha256-iKUXpJm5mQmKjos&#43;BWLF2QLTxbIcakjqgpkkibHE/fk="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><span>ZORRO</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  
  
  

  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
    <span>Getting started</span>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/introduction/build-from-sourcecoude/" class="">Build from the source code</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/introduction/operate-in-console/" class="">Console operation</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
    <span>Tutorial</span>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/course/service-interface/" class="">Service Interface(SI) Description</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/course/exchange-interface/" class="">Exchange Interface(EI) Description</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/course/flight-interface/" class="">Flight Interface(FI) Description</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/course/principle-of-anonymous-token/" class="active">Anonymous tokens issuance principle</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/course/how-to-staking-using-zro/" class="">How to start ZORRO Staking on zro</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
  </ul>
  















</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Anonymous tokens issuance principle</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#utxo-and-account">UTXO and ACCOUNT</a>
      <ul>
        <li><a href="#utxo-based-transactions">UTXO-Based Transactions</a></li>
        <li><a href="#account-based-transactions">ACCOUNT-Based Transactions</a></li>
        <li><a href="#zorros-hybrid-model">ZORRO&rsquo;s Hybrid Model</a></li>
      </ul>
    </li>
    <li><a href="#anonymous-transaction-structure">Anonymous Transaction Structure</a>
      <ul>
        <li><a href="#transactions-tx">Transactions <code>Tx</code></a></li>
        <li><a href="#input-z-ins">Input <code>Z ins</code></a></li>
        <li><a href="#two-types-of-output-outs">Two types of output <code>outs</code></a></li>
        <li><a href="#the-balance-of-inputs-and-outputs">The <code>Balance</code> of inputs and outputs</a></li>
        <li><a href="#transaction-sender-from">Transaction Sender <code>From</code></a></li>
      </ul>
    </li>
    <li><a href="#principle-of-issuing-anonymous-tokens">Principle of Issuing Anonymous Tokens</a>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="anonymous-tokens-issuance-principle">
  <strong>Anonymous Tokens Issuance Principle</strong>
  <a class="anchor" href="#anonymous-tokens-issuance-principle">#</a>
</h1>
<hr>
<p>ZORRO is the world&rsquo;s first privacy blockchain system that supports Turing&rsquo;s complete smart contracts. Since it supports 
smart contracts, it is certainly not a simple smart contracts + anonymous coins. ZORRO deeply integrates the advantages 
of both: the openness of smart contracts and the closeness of privacy systems. With the support of the two features, 
ZORRO&rsquo;s smart contracts have very exciting features that can do some amazing things.</p>
<p>This article mainly explains the application of the <code>Anonymous Token API</code> provided by ZORRO in smart contracts, and 
briefly introduces the  principle of the anonymous tokens at the beginning.</p>
<h2 id="utxo-and-account">
  UTXO and ACCOUNT
  <a class="anchor" href="#utxo-and-account">#</a>
</h2>
<p>Readers who understand the structure of blockchain should know that the blockchain is a distributed ledger, each ledger account contains multiple transactions <code>Tx</code>, and each transaction contains multiple records. The smallest unit of the ledger account is record, and each record stores the inflow or outflow of the account&rsquo;s assets. However, from the actual implementations, according to the different ways of asset outflow recording, the blockchain systems have evolved into two different accounting implementations, which are UTXO model and ACCOUNT model. These two models correspond to the models of Bitcoin and Ethereum respectively. ZORRO uses a more complex hybrid model.</p>
<h3 id="utxo-based-transactions">
  UTXO-Based Transactions
  <a class="anchor" href="#utxo-based-transactions">#</a>
</h3>
<p><img src="http://sero-media.s3-website-ap-southeast-1.amazonaws.com/images/jianshu/277023-d4f32a0a0768aca8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png" /></p>
<p>As shown above, there are two types of records in the UTXO mode. For the transaction creator, they are <code>Input</code> and <code>Output</code>, which in the view of the transaction acceptor is <code>Unspent Transaction Output (UTXO)</code>, until the transaction acceptor initiate another transaction and specify an <code>Input</code> to invalidate this <code>UTXO</code>. Records in transactions always link various inputs and outputs. In this mode, <code>account</code> is not necessary as a status summary.</p>
<p>For example, in the above picture, Alice received a transaction <code>Tx 0</code>, this transaction has an output of <code>UTXO 0</code>, and there are <code>V</code> ZORRO coins in <code>UTXO 0</code>, which can be recorded on her account [+V ZORRO , BALANCE=V]. Then she transfers the <code>V</code> ZORRO coins to Bob, so she generates a transaction <code>Tx 1</code>, this transaction has an <code>Input</code> to invalidate <code>UTXO 0</code>, then Alice&rsquo;s <code>ACCOUNT</code> should record [-V ZORRO, BALANCE=0]. For Bob, he added a <code>UTXO 1</code> with a value of <code>V</code> ZORRO. If his <code>BALANCE</code> before <code>ACCOUNT</code> is 0, his account can record [+V ZORRO, BALANCE=V].</p>
<p><strong>This model has two advantages：</strong></p>
<ol>
<li>Each transaction in UTXO model is independent of each other, which means that transactions under one account can be processed in parallel as long as the problem of double spend can be handled properly, and the capability of multi-core CPU can be fully utilized.</li>
<li>UTXO is essentially a record form based on history, both a process and a result, so it has great advantages in some applications where proofs need to be generated. This is why the blockchain systems with CT(Conﬁdential Transactions) features are basically UTXO mode.</li>
</ol>
<h3 id="account-based-transactions">
  ACCOUNT-Based Transactions
  <a class="anchor" href="#account-based-transactions">#</a>
</h3>
<p><img src="http://sero-media.s3-website-ap-southeast-1.amazonaws.com/images/jianshu/277023-0ee97ccbafff9d07.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png" /></p>
<p>The UTXO model mentioned above said that each account can generate a temporary <code>ACCOUNT</code> as a status summary. In UTXO model, this account is temporary and not necessary. In the ACCOUNT model, each asset inflow and outflow record in the transaction references <code>ACCOUNT</code> instead of <code>UTXO</code>, the record <code>Input</code> indicates that the assets of the <code>ACCOUNT</code> are added, and the record <code>Output</code> indicates that the assets of the <code>ACCOUNT</code> are subtracted. In this model, the <code>ACCOUNT</code> entity is required. Without this <code>ACCOUNT</code>, all records do not make sense to the ledger.</p>
<p>As mentioned above, for example, Alice has previously received a transaction <code>Tx 0</code>, this transaction has an output value of <code>Output 0</code> for V ZORRO coins, and her <code>ACCOUNT</code> will add V ZORRO coins. At this time she wants to transfer out V ZORRO coins to Bob, then she initiates a transaction, the <code>Input</code> of the transaction points to her <code>ACCOUNT</code>, the value is V ZORRO coins, and the <code>Output 1</code> points to Bob&rsquo;s <code>ACCOUNT</code>, the value is also V ZORRO coins. When the transaction is processed by the system, the assets in both <code>ACCOUNT</code> will be directly added or subtracted. In this model, Alice can&rsquo;t distinguish whether the <code>Input</code> is the ZORRO coins transfered by <code>Output 0</code> or the ZORRO coins that was previously stored in the <code>ACCOUNT</code>.</p>
<p><strong>The ACCOUNT model also has two advantages</strong></p>
<ol>
<li>ACCOUNT model directly add or subtract the assets in an independent account, and can add or subtract any value of assets in an account with only one record. Therefore, the generated record size is much smaller than the record generated by UTXO in the same situation.</li>
<li>The ACCOUNT model is state-based, <code>Input</code> and <code>Output</code> are processes, and <code>ACCOUNT</code> is the result, so it is easy to implement the Turing machine, that is why the blockchain that supports Turing&rsquo;s complete smart contracts mostly uses the ACCOUNT model.</li>
</ol>
<h3 id="zorros-hybrid-model">
  ZORRO&rsquo;s Hybrid Model
  <a class="anchor" href="#zorros-hybrid-model">#</a>
</h3>
<p><img src="http://sero-media.s3-website-ap-southeast-1.amazonaws.com/images/jianshu/277023-00dcc847debac203.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png" /></p>
<p>ZORRO applies UTXO and ACCOUNT models together, using UTXO model where CT(Conﬁdential Transactions) are required, and using ACCOUNT model where smart contracts need to be run. ZORRO seamlessly integrates these two models through trading, consensus, and Pedersen Commitment algorithms, enabling smart contracts to perform surprisingly.</p>
<blockquote>
<p>The <code>smart contracts</code> mentioned in this article corresponds to the concept of <code>Online Smart Contracts</code> in ZORRO&rsquo;s white paper.</p>
</blockquote>
<h2 id="anonymous-transaction-structure">
  Anonymous Transaction Structure
  <a class="anchor" href="#anonymous-transaction-structure">#</a>
</h2>
<p>In the BETANet network, ZORRO&rsquo;s general transactions are mandatory for anonymity. Because if any non-anonymous transaction can be allowed, the privacy of the users who wants to use the anonymous feature will not be guaranteed in the associated transaction. In addition, if you want to publicize information such as your own assets, it is recommended to use smart contracts to disclose some information to a limited extent.</p>
<blockquote>
<p>When the MAINNet is released, ZORRO will achieve a balance of privacy and execution speed by selecting the privacy level.</p>
</blockquote>
<h3 id="transactions-tx">
  Transactions <code>Tx</code>
  <a class="anchor" href="#transactions-tx">#</a>
</h3>
<p><img src="http://sero-media.s3-website-ap-southeast-1.amazonaws.com/images/jianshu/277023-9c52fb6586e6ba0e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png" /></p>
<p>ZORRO&rsquo;s confidential transactions <code>Tx</code> have an anonymous input set <code>Z ins</code>, an anonymous output set <code>Z outs</code>, a normal output set <code>O outs</code>, and a temporary address <code>From</code>. <code>Z ins</code> is completely anonymous, making it impossible for third-party observers to find out the source and content. <code>Z outs</code> is completely anonymous <code>UTXO</code>, only the receiver can view and use its content, the content carried by the <code>O Outs</code> is not hidden, and it refers to the receiver in two situations: one is pointing to a smart contract address, and the other is pointing to a temporary address. <code>From</code> represents the sender of the transaction and is also a temporary address. Therefore, the whole <code>Tx</code> cannot make the third-party observers determine who is the real user, and the information such as assets carried in it is also hidden to the greatest extent.</p>
<h3 id="input-z-ins">
  Input <code>Z ins</code>
  <a class="anchor" href="#input-z-ins">#</a>
</h3>
<p><img src="http://sero-media.s3-website-ap-southeast-1.amazonaws.com/images/jianshu/277023-52d7661f96f8479b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png" /></p>
<p>In the input set <code>Z ins</code> of the ZORRO transactions, each input is anonymous, including the Id of the source <code>UTXO</code> and the asset information carried. Each input is converted to a <code>Proof</code> generated by zero-knowledge proofs <code>ZKP</code>. The <code>Proof</code> pointed to a particular <code>UTXO</code> hidden in a huge <code>UTXO</code> sequence, which is part of the ZORRO history, all details hidden by <code>Proof</code>. The verifier can confirm whether the input is valid by <code>Proof</code> without knowing the details. This way of hidding data is similar to the ring signature, but the <code>Proof</code> is much smaller than the ring signature, and using the zero knowledge proofs, the data range used to hide the UTXO collections is much larger than the ring signature.</p>
<h3 id="two-types-of-output-outs">
  Two types of output <code>outs</code>
  <a class="anchor" href="#two-types-of-output-outs">#</a>
</h3>
<p><img src="http://sero-media.s3-website-ap-southeast-1.amazonaws.com/images/jianshu/277023-01ae40ec8cdfb86f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="image.png" /></p>
<p>The outputs contained in the ZORRO transaction are divided into two forms, zero-knowledge output <code>Z out</code> and normal output <code>O out</code>.</p>
<p><strong>Z out</strong>
<code>Z out</code> points to the temporary address <code>PKr</code>, and the temporary address can only be decrypted by the receiver. Since each temporary address is different, no third party can identify the <code>Z out</code> real point address. <code>Z out</code> also carries the encrypted information <code>Encrypt Info</code> of the asset, which can only be decrypted by the party holding the receiver&rsquo;s private key. And <code>OutCM</code> is the output commitment, only the parties of the transaction can reproduce the computing process of <code>OutCM</code>. <code>OutCM</code> plays a crucial role in proving that <code>Z out</code> is referenced by <code>ins</code>.</p>
<p><strong>O out</strong></p>
<p>The PKr pointed to by <code>O out</code> has two forms, one is initiated by a smart contract and points to the temporary address of the common account. The other is initiated by a normal account, pointing to the address of the smart contract. Due to the randomness of the temporary address, the third party cannot know the identity of the receiver, and the asset information carried by <code>O out</code> is public.</p>
<h3 id="the-balance-of-inputs-and-outputs">
  The <code>Balance</code> of inputs and outputs
  <a class="anchor" href="#the-balance-of-inputs-and-outputs">#</a>
</h3>
<p><img src="http://sero-media.s3-website-ap-southeast-1.amazonaws.com/images/jianshu/277023-f95d65efdd4e239d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="image.png" /></p>
<p><code>Tx</code> packages <code>ins</code>, <code>Z outs</code>, and <code>O outs</code> together. How to prevent malicious attackers from tampering with the data and ensuring asset security? By introducing perdesen commitment, its homomorphic encryption feature enables verifiers to confirm that <code>Balance</code> must be balanced without knowing the details of the information, that is, the input is equal to the output.</p>
<p>In addition, in order to prevent malicious attackers from tampering with <code>O outs</code>, we use the random feature of <strong>perdesen commitment</strong> to sign <code>Tx Hash</code> with the random part of <code>Balance</code>. In this way, each input and output can be computed independently and then packaged together by <code>B-Sign</code>.</p>
<h3 id="transaction-sender-from">
  Transaction Sender <code>From</code>
  <a class="anchor" href="#transaction-sender-from">#</a>
</h3>
<p>When the output of a transaction points to a smart contract, the smart contract sometimes needs to output resources to a given account based on the written rules. At this time, the temporary address <code>From</code> is the place where the output resources are received. <code>From</code> is determined when the transaction is generated and used only once. Other than the sender of the transaction, the third parties cannot locate the identity of the sender.</p>
<h2 id="principle-of-issuing-anonymous-tokens">
  Principle of Issuing Anonymous Tokens
  <a class="anchor" href="#principle-of-issuing-anonymous-tokens">#</a>
</h2>
<h4 id="token-assets">
  Token Assets
  <a class="anchor" href="#token-assets">#</a>
</h4>
<p>Token, also known as the “homogeneous pass”, is an asset form recognized within ZORRO system. The same kind of tokens can be arbitrarily divided and mixed, specifically the so-called &ldquo;coins&rdquo;. As the first currency of the ZORRO system, ZORRO coins are also a type of tokenss in essence. For Token assets, except for handling fees, which can only be paid in ZORRO coins, they are treated the same within the ZORRO system, and their privacy and security are ensured by consensus.</p>
<blockquote>
<p>Unlike the <code>Token</code> concept in Ethereum, the <code>Tokens</code> in Ethereum are only symbols of the internal records of the smart contracts, and <code>ETH</code> is the Token asset that is actually running inside Ethereum.</p>
</blockquote>
<h4 id="token-name">
  Token Name
  <a class="anchor" href="#token-name">#</a>
</h4>
<p>Each <code>Token</code> has a name. After the ZORRO system is initialized, there is only one registered token named <code>ZORRO</code> by default. When a smart contract issues an anonymous token, a globally unique string must be registered with the ZORRO system as the name of the token. The token name can greatly improve the readability of your issued assets.</p>
<h4 id="anonymous-token-assets">
  Anonymous Token Assets
  <a class="anchor" href="#anonymous-token-assets">#</a>
</h4>
<p><img src="http://sero-media.s3-website-ap-southeast-1.amazonaws.com/images/jianshu/277023-dad514ff5a2f031e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png" /></p>
<p>ZORRO&rsquo;s smart contracts have a very powerful feature, which is that you can issue an &ldquo;anonymous Token&rdquo; at will. Of course, the premise is that you need a token name that has never been registered. Once the anonymous Tokens are successfully issued, the smart contract can send the tokens to the temporary address <code>PKr</code> of a normal account in the form of a normal transaction. At this time, thess sent tokens will be separated from the smart contract account in the form of UTXO, and transfered into the user&rsquo;s account like ZORRO coins , thus being protected by ZORRO&rsquo;s privacy mechanism.</p>
<blockquote>
<p>The issue of ZORRO coins is achieved by miners. The process is similar to the mechanism for smart contracts to issue anonymous tokens. It is the built-in tokens distribution function of ZORRO.</p>
</blockquote>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">

  


  

  


  


<div class="book-languages" tabindex="0" aria-haspopup="true">
  <ul>
    <li class="flex align-center">
      <img src="/svg/translate.svg" class="book-icon" alt="Languages" />
      English
    </li> 
  </ul>

  <ul class="book-languages-list">
    
    <li class="active">
      <a href="https://Ethan-91.github.io/" class="flex align-center">
        <img src="/svg/translate.svg" class="book-icon" alt="Languages" />
        English
      </a>
    </li>
    
    <li class="">
      <a href="https://Ethan-91.github.io/zh/docs/course/principle-of-anonymous-token/" class="flex align-center">
        <img src="/svg/translate.svg" class="book-icon" alt="Languages" />
        Chinese
      </a>
    </li>
    
  </ul>
</div>






</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#utxo-and-account">UTXO and ACCOUNT</a>
      <ul>
        <li><a href="#utxo-based-transactions">UTXO-Based Transactions</a></li>
        <li><a href="#account-based-transactions">ACCOUNT-Based Transactions</a></li>
        <li><a href="#zorros-hybrid-model">ZORRO&rsquo;s Hybrid Model</a></li>
      </ul>
    </li>
    <li><a href="#anonymous-transaction-structure">Anonymous Transaction Structure</a>
      <ul>
        <li><a href="#transactions-tx">Transactions <code>Tx</code></a></li>
        <li><a href="#input-z-ins">Input <code>Z ins</code></a></li>
        <li><a href="#two-types-of-output-outs">Two types of output <code>outs</code></a></li>
        <li><a href="#the-balance-of-inputs-and-outputs">The <code>Balance</code> of inputs and outputs</a></li>
        <li><a href="#transaction-sender-from">Transaction Sender <code>From</code></a></li>
      </ul>
    </li>
    <li><a href="#principle-of-issuing-anonymous-tokens">Principle of Issuing Anonymous Tokens</a>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












